title: Home
header:
  card:
    type: markdown
    text_only: true
    content: |-

      {% if (states("sensor.time_of_day") == "morning") %}
        # Good Morning, {{user}}!
        {{ states("input_text.ai_morning_brief") }}
      {% elif (states("sensor.time_of_day") == "day") %}
        # Hey, {{user}}!
        It's {{ states("sensor.time") }}, the weather is {{ state_translated("weather.home") | lower }} with {{ state_attr("weather.home","temperature") }}°C. Right now there are {{ states("sensor.lights_on_count") }} lights on and {{ states("sensor.window_open_count") }} windows open. The alarm is {{ state_translated("alarm_control_panel.alarmo") }}; the front door is {{ states("lock.front_door_bolt") }}.
      {% elif (states("sensor.time_of_day") == "evening") %}
        # Good Evening, {{user}}!
        It's {{ states("sensor.time") }}, the weather is {{ state_translated("weather.home") | lower }} with {{ state_attr("weather.home","temperature") }}°C. Right now there are {{ states("sensor.lights_on_count") }} lights on and {{ states("sensor.window_open_count") }} windows open. The alarm is {{ state_translated("alarm_control_panel.alarmo") }}; the front door is {{ states("lock.front_door_bolt") }}.

      {% elif (states("sensor.time_of_day") == "night") %}
        # Good Night, {{user}}!
        It's {{ states("sensor.time") }}, the weather is {{ state_translated("weather.home") | lower }} with {{ state_attr("weather.home","temperature") }}°C. Right now there are {{ states("sensor.lights_on_count") }} lights on and {{ states("sensor.window_open_count") }} windows open. The alarm is {{ state_translated("alarm_control_panel.alarmo") }}; the front door is {{ states("lock.front_door_bolt") }}. 

      {% endif %}
    visibility:
      - condition: screen
        media_query: "(min-width: 768px)"
  layout: responsive
  badges_position: top
  badges_wrap: scroll
badges:
  - type: entity
    show_name: false
    show_state: false
    show_icon: true
    entity: input_boolean.vacation_mode
    color: orange
    tap_action:
      action: toggle
    visibility:
      - condition: state
        entity: input_boolean.vacation_mode
        state: "on"
  - type: entity
    show_name: false
    show_state: false
    show_icon: true
    entity: input_boolean.notifications_davids_iphone
    color: primary
    tap_action:
      action: toggle
    visibility:
      - condition: state
        entity: input_boolean.notifications_davids_iphone
        state: "off"
  - type: entity
    show_name: false
    show_state: true
    show_icon: true
    entity: sensor.lights_on_count
    color: amber
    visibility:
      - condition: numeric_state
        entity: sensor.lights_on_count
        above: 0
    tap_action:
      action: navigate
      navigation_path: home#lights
  - type: entity
    show_name: false
    show_state: true
    show_icon: true
    entity: sensor.chores_on_count
    color: yellow
    visibility:
      - condition: numeric_state
        entity: sensor.chores_on_count
        above: 0
    tap_action:
      action: navigate
      navigation_path: home#chores
  - type: custom:mushroom-template-badge
    content: |-
      {% if is_state('sensor.dishwasher_status', 'Running') %}
        {{ 100 - state_attr('sensor.dishwasher_timer','remaining_perc') | round(0) }}%
      {% elif is_state('sensor.dishwasher_status', 'Clean') %}
        Clean
      {% elif is_state('sensor.dishwasher_status', 'Idle') %}
        Idle
      {% else %}
        Off
      {% endif %}
    icon: |
      {% if is_state('sensor.dishwasher_status', 'Running') %}
        mdi:dishwasher
      {% elif is_state('sensor.dishwasher_status', 'Clean') %}
        mdi:dishwasher-alert
      {% elif is_state('sensor.dishwasher_status', 'Idle') %}
        mdi:dishwasher
      {% else %}
        mdi:dishwasher-off
      {% endif %}    
    color: |-
      {% if is_state('sensor.dishwasher_status', 'Running') %}
        blue
      {% elif is_state('sensor.dishwasher_status', 'Clean') %}
        green
      {% elif is_state('sensor.dishwasher_status', 'Idle') %}
        yellow
      {% else %}
        grey
      {% endif %}
    entity: sensor.dishwasher_status
    label: ""
    double_tap_action:
      action: perform-action
      perform_action: input_boolean.turn_off
      target:
        entity_id: input_boolean.chores_dishwasher
      data: {}
    visibility:
      - condition: state
        entity: sensor.dishwasher_status
        state_not: "Off"
  - type: entity
    show_name: false
    show_state: true
    show_icon: true
    entity: sensor.prusalink_progress
    icon: mdi:printer-3d
    color: orange
    visibility:
      - condition: state
        entity: sensor.prusalink
        state: printing
      - condition: user
        users:
          - 3eea636aa3de4c7f9c662ad29c6e92e0
    tap_action:
      action: navigate
      navigation_path: server#3d-printer
  - type: entity
    show_name: false
    show_state: true
    show_icon: true
    entity: vacuum.p10_pro_ultra
    color: purple
    visibility:
      - condition: state
        entity: vacuum.p10_pro_ultra
        state_not: docked
    tap_action:
      action: navigate
      navigation_path: home#vacuum
  - type: entity
    show_name: false
    show_state: false
    show_icon: true
    entity: switch.fan_outlet
    color: blue
    tap_action:
      action: toggle
    visibility:
      - condition: state
        entity: switch.fan_outlet
        state: "on"
  - type: entity
    show_name: false
    show_state: false
    show_icon: true
    entity: switch.desk_webcam
    color: green
    tap_action:
      action: toggle
    visibility:
      - condition: state
        entity: switch.desk_webcam
        state: "on"
  # MISSING ENTITIES: sensor.wake_time_1, binary_sensor.is_alarm_on, alarm_control_panel.security_system, person.julian_ - See missing_entities.md
  # - type: entity
  #   show_name: false
  #   show_state: true
  #   show_icon: true
  #   entity: sensor.wake_time_1
  #   icon: mdi:alarm
  #   color: yellow
  #   visibility:
  #     - condition: user
  #       users:
  #         - 3eea636aa3de4c7f9c662ad29c6e92e0
  #         - 82def695e9504f63b1eb09150073737d
  #     - condition: or
  #       conditions:
  #         - condition: and
  #           conditions:
  #             - entity: binary_sensor.is_alarm_on
  #               state: "on"
  #             - entity: sensor.time_of_day
  #               state_not: day
  #             - condition: state
  #               entity: input_boolean.alarm_has_run
  #               state: "off"
  #             - entity: alarm_control_panel.security_system
  #               state_not: armed_away
  #             - entity: alarm_control_panel.security_system
  #               state_not: triggered
  #             - condition: state
  #               entity: person.julian_
  #               state: home
  #         - condition: state
  #           entity: input_boolean.sound_alarm_is_running
  #           state: "on"
  #   tap_action:
  #     action: navigate
  #     navigation_path: home#alarm
  - type: entity
    show_name: false
    show_state: false
    show_icon: true
    entity: binary_sensor.raspberry_pi_health_attention
    icon: mdi:minidisc
    color: red
    visibility:
      - condition: state
        entity: binary_sensor.raspberry_pi_health_attention
        state: "on"
      - condition: user
        users:
          - 3eea636aa3de4c7f9c662ad29c6e92e0
    tap_action:
      action: navigate
      navigation_path: server
  - type: entity
    show_name: false
    show_state: false
    show_icon: true
    entity: sensor.junglemoneynas_volume_1_status
    icon: mdi:nas
    color: red
    visibility:
      - condition: state
        entity: sensor.junglemoneynas_volume_1_status
        state_not: normal
      - condition: user
        users:
          - 3eea636aa3de4c7f9c662ad29c6e92e0
    tap_action:
      action: navigate
      navigation_path: server#nas
  - type: entity
    show_name: false
    show_state: false
    show_icon: true
    entity: sensor.davids_ipad_battery_level
    icon: mdi:tablet
    color: red
    visibility:
      - condition: numeric_state
        entity: sensor.davids_ipad_battery_level
        below: 20
      - condition: user
        users:
          - 3eea636aa3de4c7f9c662ad29c6e92e0
    tap_action:
      action: navigate
      navigation_path: server#battery
  # NOTE: Replaced alarm_control_panel.security_system with alarm_control_panel.alarmo - See missing_entities.md
  - type: custom:mushroom-template-badge
    content: |-
      {% if is_state('alarm_control_panel.alarmo', 'triggered') %}
              TRIGGERED
            {% elif is_state('alarm_control_panel.alarmo', 'armed_away')  %}
              Armed
            {% elif is_state('alarm_control_panel.alarmo', 'armed_home') %}
              Home
            {% elif is_state('alarm_control_panel.alarmo', 'armed_night') %}
              Night
            {% elif is_state('alarm_control_panel.alarmo', 'disarmed') %}
              Disarmed
            {% else %}
              Arming...
            {% endif %}
    icon: |-
      {% if is_state('alarm_control_panel.alarmo', 'armed_home') %}
        mdi:shield-home-outline
      {% elif is_state('alarm_control_panel.alarmo', 'armed_away') %}
        mdi:shield-lock-outline
      {% elif is_state('alarm_control_panel.alarmo', 'triggered') %}
        mdi:shield-alert-outline
      {% elif is_state('alarm_control_panel.alarmo', 'armed_night') %}
        mdi:shield-moon-outline
      {% elif is_state('alarm_control_panel.alarmo', 'disarmed') %}
        mdi:shield-off-outline
      {% else %}
        mdi:shield-alert-outline
      {% endif %}
    color: |-
      {% if is_state('alarm_control_panel.alarmo', 'armed_home') %}
        green
      {% elif is_state('alarm_control_panel.alarmo', 'armed_away') %}
        red
      {% elif is_state('alarm_control_panel.alarmo', 'triggered') %}
        orange
      {% elif is_state('alarm_control_panel.alarmo', 'armed_night') %}
        blue
      {% elif is_state('alarm_control_panel.alarmo', 'disarmed') %}
        grey
      {% else %}
        yellow
      {% endif %}
    entity: alarm_control_panel.alarmo
    tap_action:
      action: more-info
  - type: custom:mushroom-template-badge
    content: "{{ states(\"sensor.window_open_count\") }}"
    icon: mdi:window-open-variant
    entity: group.window_sensors
    color: red
    tap_action:
      action: more-info
    visibility:
      - condition: numeric_state
        entity: sensor.window_open_count
        above: 0
  # MISSING ENTITY: lock.flat_door - See missing_entities.md
  # - type: custom:mushroom-template-badge
  #   icon: |-
  #     {% if is_state('lock.flat_door', 'locked') %}
  #       mdi:lock
  #     {% else %}
  #       mdi:lock-open
  #     {% endif %}
  #   color: |-
  #     {% if is_state('lock.flat_door', 'locked') %}
  #       green
  #     {% else %}
  #       red
  #     {% endif %}
  #   entity: lock.flat_door
  #   double_tap_action:
  #     action: call-service
  #     service: lock.lock
  #     data: {}
  #     target:
  #       entity_id: lock.flat_door
  #   content: ""
  #   tap_action:
  #     action: more-info
  - type: entity
    show_name: false
    show_state: false
    show_icon: true
    entity: update.home_assistant_core_update
    color: red
    visibility:
      - condition: or
        conditions:
          - condition: state
            entity: update.home_assistant_core_update
            state: "on"
          - condition: state
            entity: update.home_assistant_supervisor_update
            state: "on"
          - condition: state
            entity: update.home_assistant_operating_system_update
            state: "on"
      - condition: screen
        media_query: "(min-width: 768px)"
    tap_action:
      action: navigate
      navigation_path: server#updates
  - type: custom:mushroom-template-badge
    icon: mdi:account-tie-voice
    color: white
    content: ""
    tap_action:
      action: assist
    visibility:
      - condition: screen
        media_query: "(min-width: 768px)"
  - type: custom:mushroom-template-badge
    entity: person.david
    picture: "{{ state_attr(\"person.david\",\"entity_picture\") }}"
    content: "{{ states(\"person.david\") }}"
    label: David
    visibility:
      - condition: screen
        media_query: "(min-width: 768px)"
      - condition: user
        users:
          - 3eea636aa3de4c7f9c662ad29c6e92e0
    icon: ""
    color: ""
    tap_action:
      action: navigate
      navigation_path: home#david
sections:
  - type: grid
    cards:
      - type: vertical-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:button-card
                styles:
                  grid:
                    - grid-template-areas: "'item6 item1 item3 item2 item4 item5'"
                    - grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr
                  card:
                    - padding: 5px 0px
                    - background: none
                  custom_fields:
                    item1:
                      - justify-self: center
                    item2:
                      - justify-self: center
                    item3:
                      - justify-self: center
                    item4:
                      - justify-self: center
                    item5:
                      - justify-self: center
                    item6:
                      - justify-self: center
                custom_fields:
                  item1:
                    card:
                      type: custom:button-card
                      icon: mdi:thermometer
                      name: Temperature
                      label: >-
                        [[[ return
                        states["sensor.living_room_temperature"].state + "°F"
                        ]]]
                      show_label: true
                      styles:
                        card:
                          - border-radius: 0px
                          - box-shadow: none
                          - padding-right: 5px
                          - background: none
                        grid:
                          - grid-template-areas: "'i n' 'i l'"
                          - grid-template-columns: min-content
                          - column-gap: 10px
                        icon:
                          - width: 20px
                          - color: var(--red)
                        img_cell:
                          - width: 20px
                        name:
                          - justify-self: start
                          - font-size: 10px
                          - font-weight: 500
                          - color: var(--contrast14)
                        label:
                          - justify-self: start
                          - font-size: 15px
                          - font-weight: 700
                      tap_action:
                        action: navigate
                        navigation_path: "#climate"
                  item2:
                    card:
                      type: custom:button-card
                      icon: mdi:lightning-bolt
                      name: Energy
                      label: >-
                        [[[ return
                        states["sensor.washer_energy_yesterday"].state + " kWh"
                        ]]]
                      show_label: true
                      styles:
                        card:
                          - border-radius: 0px
                          - box-shadow: none
                          - padding-right: 5px
                          - background: none
                        grid:
                          - grid-template-areas: "'i n' 'i l'"
                          - grid-template-columns: min-content
                          - column-gap: 10px
                        icon:
                          - width: 20px
                          - color: var(--yellow)
                        img_cell:
                          - width: 20px
                        name:
                          - justify-self: start
                          - font-size: 10px
                          - font-weight: 500
                          - color: var(--contrast14)
                        label:
                          - justify-self: start
                          - font-size: 15px
                          - font-weight: 700
                      tap_action:
                        action: navigate
                        navigation_path: energy
                  item3:
                    card:
                      type: custom:button-card
                      icon: mdi:water-percent
                      name: Humidity
                      label: >-
                        [[[ return states["sensor.living_room_humidity"].state +
                        "%"]]]
                      show_label: true
                      styles:
                        card:
                          - border-radius: 0px
                          - box-shadow: none
                          - padding-right: 5px
                          - background: none
                        grid:
                          - grid-template-areas: "'i n' 'i l'"
                          - grid-template-columns: min-content
                          - column-gap: 10px
                        icon:
                          - width: 20px
                          - color: var(--blue)
                        img_cell:
                          - width: 20px
                        name:
                          - justify-self: start
                          - font-size: 10px
                          - font-weight: 500
                          - color: var(--contrast14)
                        label:
                          - justify-self: start
                          - font-size: 15px
                          - font-weight: 700
                      tap_action:
                        action: navigate
                        navigation_path: "#climate"
                  item4:
                    card:
                      type: custom:button-card
                      icon: mdi:alarm-off
                      name: Alarm
                      label: N/A
                      show_label: true
                      styles:
                        card:
                          - border-radius: 0px
                          - box-shadow: none
                          - padding-right: 5px
                          - background: none
                        grid:
                          - grid-template-areas: "'i n' 'i l'"
                          - grid-template-columns: min-content
                          - column-gap: 10px
                        icon:
                          - width: 20px
                          - color: var(--contrast10)
                        img_cell:
                          - width: 20px
                        name:
                          - justify-self: start
                          - font-size: 10px
                          - font-weight: 500
                          - color: var(--contrast14)
                        label:
                          - justify-self: start
                          - font-size: 15px
                          - font-weight: 700
                      tap_action:
                        action: none
                  item5:
                    card:
                      type: custom:button-card
                      entity: vacuum.p10_pro_ultra
                      icon: mdi:robot-vacuum-alert
                      name: Vacuum
                      label: Error
                      show_label: true
                      state:
                        - value: docked
                          label: Docked
                          icon: mdi:robot-vacuum-off
                          styles:
                            icon:
                              - color: var(--contrast10)
                        - value: cleaning
                          label: Cleaning
                          icon: mdi:robot-vacuum
                          styles:
                            icon:
                              - color: var(--blue)
                      styles:
                        card:
                          - border-radius: 0px
                          - box-shadow: none
                          - padding-right: 5px
                          - background: none
                        grid:
                          - grid-template-areas: "'i n' 'i l'"
                          - grid-template-columns: min-content
                          - column-gap: 10px
                        icon:
                          - width: 20px
                          - color: var(--red)
                        img_cell:
                          - width: 20px
                        name:
                          - justify-self: start
                          - font-size: 10px
                          - font-weight: 500
                          - color: var(--contrast14)
                        label:
                          - justify-self: start
                          - font-size: 15px
                          - font-weight: 700
                      tap_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                  item6:
                    card:
                      type: custom:button-card
                      entity: weather.forecast_home
                      name: Home
                      show_label: true
                      show_state: true
                      show_name: false
                      label: >-
                        [[[ return
                        states["weather.forecast_home"].attributes.temperature +
                        "°F" ]]]
                      styles:
                        card:
                          - border-radius: 0px
                          - box-shadow: none
                          - padding-right: 5px
                          - background: none
                        grid:
                          - grid-template-areas: "'i s' 'i l'"
                          - grid-template-columns: min-content
                          - column-gap: 10px
                        icon:
                          - width: 20px
                          - color: |
                              [[[
                                if (states['weather.forecast_home'].state == "partlycloudy") return "var(--contrast15)";
                                else if (states['weather.forecast_home'].state == "sunny") return "var(--yellow)";
                                else return "var(--blue)";
                              ]]]
                        img_cell:
                          - width: 20px
                        state:
                          - justify-self: start
                          - font-size: 10px
                          - font-weight: 500
                          - color: var(--contrast14)
                        label:
                          - justify-self: start
                          - font-size: 15px
                          - font-weight: 700
                      tap_action:
                        action: navigate
                        navigation_path: "#weather"
                      double_tap_action:
                        action: more-info
        grid_options:
          columns: full
          rows: auto
      - type: vertical-stack
        cards:
          - type: heading
            heading: Map
            heading_style: title
            icon: mdi:map-marker-account
            # MISSING ENTITIES: person.julian_, person.anna, person.dog, person.dog_simone, person.guest - See missing_entities.md
            # badges:
            #   - type: entity
            #     show_state: false
            #     show_icon: true
            #     entity: person.julian_
            #     icon: mdi:face-agent
            #     color: green
            #     tap_action:
            #       action: more-info
            #   - type: entity
            #     show_state: false
            #     show_icon: true
            #     entity: person.anna
            #     icon: mdi:face-woman
            #     color: purple
            #     tap_action:
            #       action: more-info
            #   - type: entity
            #     show_state: false
            #     show_icon: true
            #     entity: person.dog
            #     icon: mdi:dog
            #     color: brown
            #     tap_action:
            #       action: more-info
            #   - type: entity
            #     show_state: false
            #     show_icon: true
            #     entity: person.dog_simone
            #     icon: mdi:dog-side
            #     color: white
            #     tap_action:
            #       action: more-info
            #   - type: entity
            #     show_state: false
            #     show_icon: true
            #     entity: person.guest
            #     icon: mdi:account-group
            #     color: orange
            #     tap_action:
            #       action: more-info
        visibility:
          - condition: state
            entity: switch.security_cameras
            state: "off"
          - condition: and
            conditions:
              - condition: state
                entity: sensor.washing_machine_status
                state: "Off"
              - condition: state
                entity: sensor.dishwasher_status
                state: "Off"
              - condition: state
                entity: switch.coffee_maker_outlet
                state_not: "on"
              - condition: state
                entity: switch.fan_outlet
                state_not: "on"
              - condition: state
                entity: switch.desk_webcam
                state_not: "on"
              # MISSING ENTITY: vacuum.dobby - See missing_entities.md
              # - condition: state
              #   entity: vacuum.dobby
              #   state_not: cleaning
              - condition: state
                entity: sensor.prusalink_progress
                state: unavailable
              - condition: state
                entity: remote.harmony_hub
                state: "off"
              - condition: state
                entity: switch.ps5_343_power
                state_not: "on"
              - condition: state
                entity: binary_sensor.alexa_timer_active
                state_not: "on"
        grid_options:
          columns: full
          rows: auto
      - type: map
        entities:
          - entity: zone.home
          - entity: person.david
        theme_mode: auto
        visibility:
          - condition: state
            entity: switch.security_cameras
            state: "off"
          - condition: and
            conditions:
              - condition: state
                entity: sensor.washing_machine_status
                state: "Off"
              - condition: state
                entity: sensor.dishwasher_status
                state: "Off"
              - condition: state
                entity: switch.coffee_maker_outlet
                state_not: "on"
              - condition: state
                entity: switch.fan_outlet
                state_not: "on"
              - condition: state
                entity: switch.desk_webcam
                state_not: "on"
              # MISSING ENTITY: vacuum.dobby - See missing_entities.md
              # - condition: state
              #   entity: vacuum.dobby
              #   state_not: cleaning
              - condition: state
                entity: sensor.prusalink_progress
                state: unavailable
              - condition: state
                entity: remote.harmony_hub
                state: "off"
              - condition: state
                entity: switch.ps5_343_power
                state_not: "on"
              - condition: state
                entity: binary_sensor.alexa_timer_active
                state_not: "on"
      - type: heading
        icon: mdi:cctv
        heading: Cameras
        heading_style: title
        badges:
          - type: entity
            show_state: true
            show_icon: true
            entity: switch.security_cameras
            color: red
            tap_action:
              action: toggle
          - type: entity
            show_state: true
            show_icon: true
            entity: switch.camera_corridor_outlet
            icon: mdi:door
            color: green
            tap_action:
              action: toggle
          - type: entity
            show_state: true
            show_icon: true
            entity: switch.camera_living_room
            icon: mdi:sofa-outline
            color: green
            tap_action:
              action: toggle
          - type: entity
            show_state: true
            show_icon: true
            entity: switch.camera_office_outlet
            icon: mdi:monitor
            color: green
            tap_action:
              action: toggle
        visibility:
          - condition: screen
            media_query: "(min-width: 768px)"
          - condition: state
            entity: switch.security_cameras
            state: "on"
          - condition: state
            entity: input_boolean.vacation_mode
            state: "off"
      - square: false
        type: grid
        cards:
          - show_state: false
            show_name: false
            camera_view: live
            fit_mode: cover
            type: picture-entity
            camera_image: camera.front_camera
            entity: camera.front_camera
          - show_state: false
            show_name: false
            camera_view: live
            fit_mode: cover
            type: picture-entity
            camera_image: camera.doorbell
            entity: camera.doorbell
          - show_state: false
            show_name: false
            camera_view: live
            fit_mode: cover
            type: picture-entity
            camera_image: camera.driveway
            entity: camera.driveway
        columns: 3
        grid_options:
          columns: full
        visibility:
          - condition: screen
            media_query: "(min-width: 768px)"
          - condition: state
            entity: switch.front_camera_detect
            state: "on"
      - type: conditional
        conditions:
          - condition: or
            conditions:
              - condition: state
                entity: sensor.washer_current_status
                state_not: "Off"
              - condition: state
                entity: sensor.dryer_current_status
                state_not: "Off"
              - condition: state
                entity: fan.dyson_fan
                state: "on"
              - condition: state
                entity: vacuum.p10_pro_ultra
                state_not: docked
              - condition: state
                entity: media_player.living_room_apple_tv
                state_not: "off"
        card:
          square: false
          type: grid
          cards:
            - type: heading
              icon: mdi:star
              heading: Active
              heading_style: title
            - square: false
              type: grid
              cards:
                - type: conditional
                  conditions:
                    - condition: state
                      entity: media_player.living_room_apple_tv
                      state_not: "off"
                  card:
                    type: custom:button-card
                    entity: media_player.living_room_apple_tv
                    template: nav_button_small
                    name: Apple TV
                    label: >-
                      [[[return
                      states["media_player.living_room_apple_tv"].state]]]
                    variables:
                      navigation_path: home#media
                    state:
                      - value: "off"
                        label: "Off"
                        icon: mdi:television-off
                      - value: playing
                        label: Playing
                        icon: mdi:play
                        styles:
                          card:
                            - background-color: var(--green)
                          icon:
                            - color: var(--black)
                          name:
                            - color: var(--black)
                          label:
                            - color: var(--black)
                      - value: paused
                        label: Paused
                        icon: mdi:pause
                        styles:
                          card:
                            - background-color: var(--yellow)
                          icon:
                            - color: var(--black)
                          name:
                            - color: var(--black)
                          label:
                            - color: var(--black)
                      - value: idle
                        label: Idle
                        icon: mdi:television
                        styles:
                          card:
                            - background-color: var(--blue)
                          icon:
                            - color: var(--black)
                          name:
                            - color: var(--black)
                          label:
                            - color: var(--black)
                - type: conditional
                  conditions:
                    - condition: state
                      entity: fan.dyson_fan
                      state: "on"
                  card:
                    type: custom:button-card
                    entity: fan.dyson_fan
                    template: switch_template
                    name: Dyson Fan
                    variables:
                      icon_on: mdi:fan
                      icon_off: mdi:fan-off
                      color: var(--blue)
                - type: conditional
                  conditions:
                    - condition: state
                      entity: media_player.living_room
                      state: playing
                  card:
                    type: custom:button-card
                    entity: media_player.living_room
                    template: custom_card_mediaplayer_music
                - type: conditional
                  conditions:
                    - condition: state
                      entity: media_player.office
                      state: playing
                  card:
                    type: custom:button-card
                    entity: media_player.office
                    template: custom_card_mediaplayer_music
                - type: conditional
                  conditions:
                    - condition: state
                      entity: media_player.basement
                      state: playing
                  card:
                    type: custom:button-card
                    entity: media_player.basement
                    template: custom_card_mediaplayer_music
                - type: conditional
                  conditions:
                    - condition: state
                      entity: media_player.55_the_frame_qn55ls03fafxza
                      state_not: "off"
                  card:
                    type: custom:button-card
                    entity: media_player.55_the_frame_qn55ls03fafxza
                    template: custom_card_mediaplayer_tv
              columns: 2
            - type: conditional
              conditions:
                - condition: state
                  entity: vacuum.p10_pro_ultra
                  state_not: docked
                - condition: state
                  entity: vacuum.p10_pro_ultra
                  state_not: unavailable
                - condition: state
                  entity: vacuum.p10_pro_ultra
                  state_not: idle
              card:
                type: custom:button-card
                entity: vacuum.p10_pro_ultra
                name: P10 Pro Ultra
                icon: |
                  [[[
                    if (entity.state == 'idle') {
                      return 'mdi:dots-circle';
                    } else if (entity.state == 'cleaning') {
                      return 'mdi:robot-vacuum';
                    } else if (entity.state == 'docked') {
                      return 'mdi:robot-vacuum-off';
                    } else {
                      return 'mdi:robot-vacuum-alert';
                    }
                  ]]]
                show_name: true
                show_icon: true
                show_label: true
                show_state: false
                tap_action:
                  action: navigate
                  navigation_path: "#vacuum"
                hold_action:
                  action: more-info
                double_tap_action:
                  action: call-service
                  service: vacuum.return_to_base
                  service_data:
                    entity_id: vacuum.p10_pro_ultra
                label: "[[[ return states[\"vacuum.p10_pro_ultra\"].state ]]]"
                custom_fields:
                  icon1:
                    card:
                      type: custom:button-card
                      icon: mdi:robot-vacuum
                      styles:
                        card:
                          - background-color: var(--contrast1)
                          - width: 30px
                          - height: 30px
                        icon:
                          - width: 18px
                          - color: var(--contrast20)
                  icon2:
                    card:
                      type: custom:button-card
                      icon: mdi:battery
                      show_icon: true
                      show_name: false
                      tap_action:
                        action: more-info
                      styles:
                        card:
                          - width: 24px
                          - border: none
                          - background: none
                          - overflow: visible
                        icon:
                          - width: 22px
                          - color: |
                              [[[
                                if (entity.state == 'docked') {
                                  return 'var(--contrast20)';
                                } else {
                                  return 'var(--black)';
                                }
                              ]]]
                styles:
                  grid:
                    - grid-template-areas: >-
                        ". icon1" "l l" "n icon2" "rem icon2" "bar bar" "start
                        end"
                    - grid-template-rows: 24px 1fr 24px min-content min-content min-content
                    - grid-template-columns: 60% 40%
                  card:
                    - height: 100%
                    - padding: 1rem
                    - background: |
                        [[[
                          if (entity.state == 'docked') {
                            return 'var(--contrast2)';
                          } else if (entity.state == 'cleaning') {
                            return 'var(--green)';
                          } else if (entity.state == 'idle') {
                            return 'var(--yellow)';
                          } else {
                            return 'var(--red)';
                          }
                        ]]]
                  img_cell:
                    - position: absolute
                    - top: 20%
                    - left: 40%
                    - overflow: visible
                  icon:
                    - position: absolute
                    - width: 20em
                    - opacity: 20%
                    - color: |
                        [[[
                          if (entity.state == 'docked') {
                            return 'var(--white)';
                          } else {
                            return 'var(--black)';
                          }
                        ]]]
                    - transform: rotate(-20deg)
                    - animation: |
                        [[[
                          if (entity.state == 'docked') {
                            return 'null';
                          } else if (entity.state == 'idle') {
                            return 'blink 1.5s linear infinite';
                          } else if (entity.state == 'cleaning') {
                            return 'rotating 2s linear infinite';
                          } else {
                            return 'blink 1.5s linear infinite';
                          }
                        ]]] 
                  label:
                    - text-align: left
                    - font-size: 18px
                    - font-weight: 500
                    - justify-self: start
                    - align-self: end
                    - overflow: visible
                    - color: |
                        [[[
                          if (entity.state == 'docked') {
                            return 'var(--contrast20)';
                          } else {
                            return 'var(--black)';
                          }
                        ]]]
                  name:
                    - text-align: left
                    - font-size: 12px
                    - opacity: 0.7
                    - justify-self: start
                    - align-self: center
                    - overflow: visible
                    - color: |
                        [[[
                          if (entity.state == 'docked') {
                            return 'var(--contrast20)';
                          } else {
                            return 'var(--black)';
                          }
                        ]]]
                  custom_fields:
                    icon1:
                      - justify-self: end
                      - width: 24px
                      - color: |
                          [[[
                            if (entity.state == 'docked') {
                              return 'var(--contrast20)';
                            } else {
                              return 'var(--black)';
                            }
                          ]]]
                    icon2:
                      - justify-self: end
                      - align-self: end
                      - width: 24px
                      - color: |
                          [[[
                            if (entity.state == 'docked') {
                              return 'var(--contrast20)';
                            } else {
                              return 'var(--black)';
                            }
                          ]]]
                  hold_action:
                    action: more-info
            - type: horizontal-stack
              cards:
                - type: conditional
                  conditions:
                    - condition: state
                      entity: sensor.washer_current_status
                      state_not: "Off"
                    - condition: state
                      entity: sensor.washer_current_status
                      state_not: "power_off"
                  card:
                    type: custom:button-card
                    entity: sensor.washer_current_status
                    name: Washer
                    icon: |
                      [[[
                        if (states['sensor.washer_current_status'].state == 'Idle') {
                          return 'mdi:dots-circle';
                        } else if (states['sensor.washer_current_status'].state == 'Running') {
                          return 'mdi:circle-half-full';
                        } else if (states['sensor.washer_current_status'].state == 'Clean') {
                          return 'mdi:washing-machine';
                        } else if (states['sensor.washer_current_status'].state == 'Off') {
                          return 'mdi:washing-machine-off';
                        }
                      ]]]
                    show_name: true
                    show_icon: true
                    show_label: true
                    show_state: false
                    tap_action:
                      action: more-info
                    hold_action:
                      action: more-info
                    label: |
                      [[[
                        return states['sensor.washer_current_status'].state;
                      ]]]
                    custom_fields:
                      icon1:
                        card:
                          type: custom:button-card
                          icon: mdi:washing-machine
                          styles:
                            card:
                              - background-color: var(--contrast1)
                              - width: 30px
                              - height: 30px
                            icon:
                              - width: 18px
                              - color: var(--contrast20)
                    styles:
                      grid:
                        - grid-template-areas: "\". icon1\" \"l l\" \"n icon2\" \"rem icon2\""
                        - grid-template-rows: 24px 1fr 24px min-content
                        - grid-template-columns: 60% 40%
                      card:
                        - height: 100%
                        - padding: 1rem
                        - background: |
                            [[[
                              if (entity.state == 'Clean') {
                                return 'var(--green)';
                              } else if (entity.state == 'Running') {
                                return 'var(--blue)';
                              } else if (entity.state == 'Idle') {
                                return 'var(--yellow)';
                              } else if (entity.state == 'Off') {
                                return 'var(--contrast2)';
                              } else {
                                return 'var(--primary-text-color)';
                              }
                            ]]]
                      img_cell:
                        - position: absolute
                        - top: 20%
                        - left: 40%
                        - overflow: visible
                      icon:
                        - position: absolute
                        - width: 20em
                        - opacity: 20%
                        - color: |
                            [[[
                              if (entity.state == 'Clean') {
                                return 'var(--black)';
                              } else if (entity.state == 'Running') {
                                return 'var(--black)';
                              } else if (entity.state == 'Idle') {
                                return 'var(--black)';
                              } else if (entity.state == 'Off') {
                                return 'var(--contrast20)';
                              } else {
                                return 'var(--primary-background-color)';
                              }
                            ]]]
                        - transform: rotate(-20deg)
                        - animation: |
                            [[[
                              if (states['sensor.washer_current_status'].state == 'Clean') {
                                return 'null';
                              } else if (states['sensor.washer_current_status'].state == 'Idle') {
                                return 'blink 1.5s linear infinite';
                              } else if (states['sensor.washer_current_status'].state == 'Running') {
                                return 'rotating 2s linear infinite';
                              }
                            ]]] 
                      label:
                        - text-align: left
                        - font-size: 18px
                        - font-weight: 500
                        - justify-self: start
                        - align-self: end
                        - overflow: visible
                        - color: |
                            [[[
                              if (entity.state == 'Clean') {
                                return 'var(--black)';
                              } else if (entity.state == 'Running') {
                                return 'var(--black)';
                              } else if (entity.state == 'Idle') {
                                return 'var(--black)';
                              } else if (entity.state == 'Off') {
                                return 'var(--contrast20)';
                              } else {
                                return 'var(--primary-background-color)';
                              }
                            ]]]
                      name:
                        - text-align: left
                        - font-size: 12px
                        - opacity: 0.7
                        - justify-self: start
                        - align-self: center
                        - overflow: visible
                        - color: |
                            [[[
                              if (entity.state == 'Clean') {
                                return 'var(--black)';
                              } else if (entity.state == 'Running') {
                                return 'var(--black)';
                              } else if (entity.state == 'Idle') {
                                return 'var(--black)';
                              } else if (entity.state == 'Off') {
                                return 'var(--contrast20)';
                              } else {
                                return 'var(--primary-background-color)';
                              }
                            ]]]
                      custom_fields:
                        icon1:
                          - justify-self: end
                          - width: 24px
                          - color: |
                              [[[
                                if (entity.state == 'Clean') {
                                  return 'var(--black)';
                                } else if (entity.state == 'Running') {
                                  return 'var(--black)';
                                } else if (entity.state == 'Idle') {
                                  return 'var(--black)';
                                } else if (entity.state == 'Off') {
                                  return 'var(--contrast20)';
                                } else {
                                 return 'var(--primary-background-color)';
                               }
                              ]]]
                      hold_action:
                        action: more-info
                - type: conditional
                  conditions:
                    - condition: state
                      entity: sensor.dryer_current_status
                      state_not: "Off"
                    - condition: state
                      entity: sensor.dryer_current_status
                      state_not: "power_off"
                  card:
                    type: custom:button-card
                    entity: sensor.dryer_current_status
                    name: Dryer
                    icon: |
                      [[[
                        if (states['sensor.dryer_current_status'].state == 'Idle') {
                          return 'mdi:dots-circle';
                        } else if (states['sensor.dryer_current_status'].state == 'Running') {
                          return 'mdi:circle-half-full';
                        } else if (states['sensor.dryer_current_status'].state == 'Clean') {
                          return 'mdi:tumble-dryer';
                        } else if (states['sensor.dryer_current_status'].state == 'Off') {
                          return 'mdi:tumble-dryer-off';
                        }
                      ]]]
                    show_name: true
                    show_icon: true
                    show_label: true
                    show_state: false
                    tap_action:
                      action: more-info
                    hold_action:
                      action: more-info
                    label: |
                      [[[
                        return states['sensor.dryer_current_status'].state;
                      ]]]
                    custom_fields:
                      icon1:
                        card:
                          type: custom:button-card
                          icon: mdi:tumble-dryer
                          styles:
                            card:
                              - background-color: var(--contrast1)
                              - width: 30px
                              - height: 30px
                            icon:
                              - width: 18px
                              - color: var(--contrast20)
                    styles:
                      grid:
                        - grid-template-areas: "\". icon1\" \"l l\" \"n icon2\" \"rem icon2\""
                        - grid-template-rows: 24px 1fr 24px min-content
                        - grid-template-columns: 60% 40%
                      card:
                        - height: 100%
                        - padding: 1rem
                        - background: |
                            [[[
                              if (entity.state == 'Clean') {
                                return 'var(--green)';
                              } else if (entity.state == 'Running') {
                                return 'var(--blue)';
                              } else if (entity.state == 'Idle') {
                                return 'var(--yellow)';
                              } else if (entity.state == 'Off') {
                                return 'var(--contrast2)';
                              } else {
                                return 'var(--primary-text-color)';
                              }
                            ]]]
                      img_cell:
                        - position: absolute
                        - top: 20%
                        - left: 40%
                        - overflow: visible
                      icon:
                        - position: absolute
                        - width: 20em
                        - opacity: 20%
                        - color: |
                            [[[
                              if (entity.state == 'Clean') {
                                return 'var(--black)';
                              } else if (entity.state == 'Running') {
                                return 'var(--black)';
                              } else if (entity.state == 'Idle') {
                                return 'var(--black)';
                              } else if (entity.state == 'Off') {
                                return 'var(--contrast20)';
                              } else {
                                return 'var(--primary-background-color)';
                              }
                            ]]]
                        - transform: rotate(-20deg)
                        - animation: |
                            [[[
                              if (states['sensor.dryer_current_status'].state == 'Clean') {
                                return 'null';
                              } else if (states['sensor.dryer_current_status'].state == 'Idle') {
                                return 'blink 1.5s linear infinite';
                              } else if (states['sensor.dryer_current_status'].state == 'Running') {
                                return 'rotating 2s linear infinite';
                              }
                            ]]] 
                      label:
                        - text-align: left
                        - font-size: 18px
                        - font-weight: 500
                        - justify-self: start
                        - align-self: end
                        - overflow: visible
                        - color: |
                            [[[
                              if (entity.state == 'Clean') {
                                return 'var(--black)';
                              } else if (entity.state == 'Running') {
                                return 'var(--black)';
                              } else if (entity.state == 'Idle') {
                                return 'var(--black)';
                              } else if (entity.state == 'Off') {
                                return 'var(--contrast20)';
                              } else {
                                return 'var(--primary-background-color)';
                              }
                            ]]]
                      name:
                        - text-align: left
                        - font-size: 12px
                        - opacity: 0.7
                        - justify-self: start
                        - align-self: center
                        - overflow: visible
                        - color: |
                            [[[
                              if (entity.state == 'Clean') {
                                return 'var(--black)';
                              } else if (entity.state == 'Running') {
                                return 'var(--black)';
                              } else if (entity.state == 'Idle') {
                                return 'var(--black)';
                              } else if (entity.state == 'Off') {
                                return 'var(--contrast20)';
                              } else {
                                return 'var(--primary-background-color)';
                              }
                            ]]]
                      custom_fields:
                        icon1:
                          - justify-self: end
                          - width: 24px
                          - color: |
                              [[[
                                if (entity.state == 'Clean') {
                                  return 'var(--black)';
                                } else if (entity.state == 'Running') {
                                  return 'var(--black)';
                                } else if (entity.state == 'Idle') {
                                  return 'var(--black)';
                                } else if (entity.state == 'Off') {
                                  return 'var(--contrast20)';
                                } else {
                                 return 'var(--primary-background-color)';
                               }
                              ]]]
                      hold_action:
                        action: more-info
          columns: 1
      - type: vertical-stack
        cards:
          - type: heading
            heading: Security
            heading_style: title
            icon: mdi:security
            badges:
              - type: entity
                show_state: false
                show_icon: true
                entity: switch.front_camera_detect
                color: orange
                tap_action:
                  action: toggle
              - type: entity
                show_state: false
                show_icon: true
                entity: binary_sensor.door_sensor_door
                color: red
                tap_action:
                  action: more-info
              - type: entity
                show_state: false
                show_icon: true
                entity: binary_sensor.front_camera_motion
                tap_action:
                  action: more-info
                color: yellow
              - type: entity
                show_state: false
                show_icon: true
                entity: lock.front_door_bolt
                tap_action:
                  action: more-info
                color: red
            grid_options:
              columns: 12
              rows: 1
            tap_action:
              action: navigate
              navigation_path: security
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                name: David
                show_name: false
                show_state: false
                show_icon: true
                show_entity_picture: true
                entity: person.david
                tap_action:
                  action: more-info
                state:
                  - value: not_home
                    styles:
                      entity_picture:
                        - filter: grayscale(100%)
                styles:
                  card:
                    - background-color: var(--contrast2)
                    - padding: 10px 10px 10px 0px
                  grid:
                    - grid-template-areas: "\"icon name btn\" \"icon state btn\""
                    - grid-template-columns: 60px 1fr min-content
                    - grid-template-rows: min-content
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 40px
                    - height: 40px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 8px 10px
                    - border-radius: 50%
                    - border: |
                        [[[
                          if (entity.state == 'home') {
                            return '2px solid var(--green)';
                          } else {
                            return 'none';
                          }
                        ]]]
                  entity_picture:
                    - justify-content: start
                    - position: absolute
                    - width: 40px
                    - height: 40px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 0 0
                    - border-radius: 500px
                  icon:
                    - width: 50px
                    - color: var(--contrast1)
                  custom_fields:
                    name:
                      - align-self: start
                      - justify-self: start
                      - background: none
                      - box-shadow: none
                      - padding: 0
                    state:
                      - align-self: start
                      - justify-self: start
                      - background: none
                      - box-shadow: none
                      - padding: 0
                      - margin-top: "-5px"
                    btn:
                      - align-self: end
                      - justify-self: end
                    icon:
                      - align-self: start
                      - justify-self: start
                    badge:
                      - position: absolute
                      - left: 38px
                      - top: 5px
                custom_fields:
                  name:
                    card:
                      type: custom:button-card
                      name: David
                      styles:
                        card:
                          - color: var(--contrast20)
                          - font-size: 14px
                          - font-weight: 600
                          - background: none
                          - box-shadow: none
                  state:
                    card:
                      type: custom:button-card
                      entity: "[[[ return entity.entity_id ]]]"
                      show_icon: false
                      name: |
                        [[[ 
                          return states['person.david'].state;
                        ]]]
                      state:
                        - value: home
                          name: Home
                        - value: not_home
                          name: Away
                      styles:
                        card:
                          - color: var(--contrast20)
                          - font-size: 12px
                          - background: none
                          - opacity: "0.7"
                          - box-shadow: none
                  badge:
                    card:
                      type: custom:button-card
                      entity: "[[[ return entity.entity_id ]]]"
                      show_icon: true
                      show_name: false
                      icon: mdi:home
                      state:
                        - value: home
                          icon: mdi:home
                          styles:
                            card:
                              - background: var(--green)
                        - value: not_home
                          icon: mdi:home-export-outline
                          styles:
                            card:
                              - background: var(--red)
                      styles:
                        card:
                          - border-radius: 50%
                          - width: 16px
                          - height: 16px
                          - background: none
                        icon:
                          - color: black
                          - width: 12px
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: entity
                          tap_action:
                            action: more-info
                          entity: sensor.davids_iphone_battery_level
                          content_info: none
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'var(--contrast1)' if states('sensor.davids_iphone_battery_level') | float > 10  else 'var(--red)' }};
                                --color: {{ 'var(--contrast20)' if states('sensor.davids_iphone_battery_level') | float > 10  else 'var(--black)' }};
                                padding: 0px!important;
                                border-radius: 100px!impportant;
                                box-shadow: none !important;
                                --primary-text-color: var(--contrast20);
            columns: 2
      - type: vertical-stack
        cards:
          - type: heading
            heading: Climate
            heading_style: title
            icon: mdi:thermostat
            badges:
              - type: entity
                show_state: false
                show_icon: true
                entity: climate.living_room
                icon: mdi:thermometer
                color: red
            tap_action:
              action: navigate
              navigation_path: home#climate
          - type: vertical-stack
            cards:
              - type: conditional
                conditions:
                  - condition: state
                    entity: climate.living_room
                    state_not: auto
                card:
                  type: custom:button-card
                  entity: climate.living_room
                  template: custom_card_climate
                  variables:
                    sensor: binary_sensor.door_sensor_door
                    name: "[[[ return \"Living Room\" ]]]"
                    radius: 24px
              - square: false
                type: grid
                columns: 2
                cards:
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: climate.floor_thermostat
                        state_not: auto
                    card:
                      type: custom:button-card
                      entity: climate.floor_thermostat
                      template: custom_card_climate
                      variables:
                        sensor: binary_sensor.leak_sensor_moisture
                        name: "[[[ return \"Master<br>Bath\" ]]]"
                        radius: 24px
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: climate.floor_thermostat_2
                        state_not: auto
                    card:
                      type: custom:button-card
                      entity: climate.floor_thermostat_2
                      template: custom_card_climate
                      variables:
                        sensor: binary_sensor.leak_sensor_moisture_2
                        name: "[[[ return \"First Floor<br>Bath\" ]]]"
                        radius: 24px
        visibility:
          - condition: or
            conditions:
              - condition: state
                entity: climate.living_room
                state_not: auto
              - condition: state
                entity: climate.floor_thermostat
                state_not: auto
              - condition: state
                entity: climate.floor_thermostat_2
                state_not: auto
      - type: vertical-stack
        cards:
          - type: heading
            heading: Admin
            heading_style: title
            icon: mdi:account
            tap_action:
              action: navigate
              navigation_path: server
          - square: false
            type: grid
            cards:
              - type: conditional
                conditions:
                  - condition: state
                    entity: binary_sensor.dream_machine_special_edition_hdd_1
                    state: "on"
                card:
                  type: custom:button-card
                  entity: binary_sensor.dream_machine_special_edition_hdd_1
                  name: Server Health
                  label: >-
                    [[[return
                    states["binary_sensor.dream_machine_special_edition_hdd_1"].state]]]
                  template: nav_button_state_small
                  variables:
                    navigation_path: server
                    icon_on: mdi:server-network
                    icon_off: mdi:server-network
              - type: conditional
                conditions:
                  - condition: state
                    entity: sensor.system_monitor_processor_use
                    state_not: unavailable
                card:
                  type: custom:button-card
                  entity: sensor.system_monitor_processor_use
                  icon: mdi:chip
                  name: System
                  label: >-
                    [[[return
                    states["sensor.system_monitor_processor_use"].state + '%']]]
                  template: nav_button_state_small
                  variables:
                    navigation_path: server#monitored
                    icon_on: mdi:chip
                    icon_off: mdi:chip
                    background_color_on: var(--red)
                    background_color_off: var(--green)
              - type: conditional
                conditions:
                  - condition: or
                    conditions:
                      - condition: state
                        entity: update.home_assistant_core_update
                        state: "on"
                      - condition: state
                        entity: update.home_assistant_supervisor_update
                        state: "on"
                      - condition: state
                        entity: update.home_assistant_operating_system_update
                        state: "on"
                card:
                  type: custom:button-card
                  entity: update.home_assistant_core_update
                  icon: mdi:update
                  name: Updates
                  label: |
                    [[[
                      if (entity.state == "on") return "Available";
                      else return "None";
                    ]]]
                  template: nav_button_small
                  variables:
                    navigation_path: "#updates"
                    icon_on: mdi:update
                    icon_off: mdi:update
                    background_color_on: var(--red)
                    background_color_off: var(--contrast2)
                    color_off: null
              - type: conditional
                conditions:
                  - condition: or
                    conditions:
                      - condition: numeric_state
                        entity: sensor.davids_iphone_battery_level
                        below: 20
                      - condition: numeric_state
                        entity: sensor.door_sensor_battery
                        below: 20
                      - condition: numeric_state
                        entity: sensor.door_sensor_battery_2
                        below: 20
                      - condition: numeric_state
                        entity: sensor.leak_sensor_battery
                        below: 20
                      - condition: numeric_state
                        entity: sensor.leak_sensor_battery_2
                        below: 20
                card:
                  type: custom:button-card
                  entity: sensor.davids_iphone_battery_level
                  name: Batteries
                  label: Low
                  template: nav_button_state_small
                  variables:
                    navigation_path: "#battery"
                    icon_on: mdi:battery-alert-variant-outline
                    icon_off: mdi:battery-80
              - type: conditional
                conditions:
                  - condition: numeric_state
                    entity: sensor.dream_machine_special_edition_storage_utilization
                    above: 80
                card:
                  type: custom:button-card
                  entity: sensor.dream_machine_special_edition_storage_utilization
                  icon: mdi:harddisk
                  name: Storage
                  label: >-
                    [[[return
                    states["sensor.dream_machine_special_edition_storage_utilization"].state
                    + "%"]]]
                  template: nav_button_small
                  variables:
                    navigation_path: "#storage"
                    icon_on: mdi:harddisk
                    icon_off: mdi:harddisk
                    state_off: normal
                    background_color_on: var(--red)
                    background_color_off: var(--blue)
              - type: conditional
                conditions:
                  - condition: state
                    entity: sensor.dream_machine_special_edition_state
                    state_not: Connected
                card:
                  type: custom:button-card
                  entity: sensor.dream_machine_special_edition_state
                  icon: mdi:router-network
                  name: Network
                  label: >-
                    [[[return
                    states["sensor.dream_machine_special_edition_state"].state]]]
                  template: nav_button_small
                  variables:
                    navigation_path: "#network"
                    icon_on: mdi:router-network
                    icon_off: mdi:router-network
                    background_color_on: var(--purple)
                    background_color_off: var(--red)
            columns: 3
        visibility:
          - condition: or
            conditions:
              - condition: state
                entity: update.home_assistant_core_update
                state: "on"
              - condition: state
                entity: update.home_assistant_supervisor_update
                state: "on"
              - condition: numeric_state
                entity: sensor.dream_machine_special_edition_storage_utilization
                above: 80
              - condition: numeric_state
                entity: sensor.davids_iphone_battery_level
                below: 20
              - condition: state
                entity: sensor.dream_machine_special_edition_state
                state_not: Connected
              - condition: state
                entity: binary_sensor.dream_machine_special_edition_hdd_1
                state: "on"
          - condition: user
            users:
              - 3eea636aa3de4c7f9c662ad29c6e92e0
    column_span: 2
    visibility:
      - condition: screen
        media_query: "(min-width: 768px)"
  - type: grid
    cards:
      - type: vertical-stack
        cards:
          - type: custom:button-card
            template: custom_card_user
          - type: custom:bubble-card
            card_type: empty-column
        visibility:
          - condition: screen
            media_query: "(min-width: 0px) and (max-width: 767px)"
      - type: conditional
        conditions:
          - entity: switch.security_cameras
            state: "on"
          - condition: state
            entity: input_boolean.vacation_mode
            state: "off"
          - condition: screen
            media_query: "(min-width: 0px) and (max-width: 767px)"
        card:
          type: custom:swipe-card
          card_width: calc(100% - 48px)
          parameters:
            centeredSlides: true
            slidesPerView: auto
            spaceBetween: 16
            initialSlide: 0
          cards:
            - type: conditional
              conditions:
                - entity: switch.camera_corridor_outlet
                  state: "on"
                - entity: switch.camera_living_room
                  state: "on"
                - entity: switch.camera_office_outlet
                  state: "on"
              card:
                type: custom:button-card
                entity: camera.192_168_178_78
                show_entity_picture: true
                show_name: false
                tap_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                styles:
                  grid:
                    - grid-template-areas: "\"i two\" \"i three\""
                    - grid-template-columns: 50% 50%
                    - grid-template-rows: 50% 50%
                  card:
                    - background: var(--contrast2)
                    - padding: 0
                    - border-radius: 16px
                  entity_picture:
                    - width: 100%
                    - height: 100%
                    - object-fit: cover
                custom_fields:
                  two:
                    card:
                      type: custom:button-card
                      entity: camera.192_168_178_125
                      show_entity_picture: true
                      show_name: false
                      tap_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      styles:
                        card:
                          - background: var(--contrast2)
                          - padding: 0
                          - border-radius: 0px 16px 0px 0px
                          - border-left: 2px solid black
                          - border-bottom: 1px solid black
                        entity_picture:
                          - width: 100%
                          - height: 100%
                  three:
                    card:
                      type: custom:button-card
                      entity: camera.192_168_178_77
                      show_entity_picture: true
                      show_name: false
                      tap_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      styles:
                        card:
                          - background: var(--contrast2)
                          - padding: 0
                          - border-radius: 0px 0px 16px 0px
                          - border-left: 2px solid black
                          - border-top: 1px solid black
                        entity_picture:
                          - width: 100%
                          - height: 100%
            - type: conditional
              conditions:
                - entity: switch.camera_corridor_outlet
                  state: "on"
              card:
                show_state: false
                show_name: false
                camera_view: live
                type: picture-entity
                tap_action:
                  action: navigate
                  navigation_path: cameras
                entity: camera.192_168_178_78
            - type: conditional
              conditions:
                - entity: switch.camera_living_room
                  state: "on"
              card:
                show_state: false
                show_name: false
                camera_view: live
                type: picture-entity
                tap_action:
                  action: navigate
                  navigation_path: cameras
                entity: camera.192_168_178_125
            - type: conditional
              conditions:
                - entity: switch.camera_office_outlet
                  state: "on"
              card:
                show_state: false
                show_name: false
                camera_view: live
                type: picture-entity
                tap_action:
                  action: navigate
                  navigation_path: cameras
                entity: camera.192_168_178_77
      - type: vertical-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:swipe-card
                card_width: 100%
                parameters:
                  centeredSlides: true
                  slidesPerView: auto
                  spaceBetween: 16
                  start_card: 1
                cards:
                  - type: custom:button-card
                    styles:
                      grid:
                        - grid-template-areas: "'item1 item2 item3'"
                        - grid-template-columns: 1fr 1fr 1fr
                      card:
                        - padding: 15px
                      custom_fields:
                        item1:
                          - justify-self: start
                        item2:
                          - justify-self: center
                        item3:
                          - justify-self: end
                    custom_fields:
                      item1:
                        card:
                          type: custom:button-card
                          icon: mdi:thermometer
                          name: Temperature
                          label: >-
                            [[[ return
                            states["sensor.living_room_temperature"].state +
                            "°C" ]]]
                          show_label: true
                          styles:
                            card:
                              - border-radius: 0px
                              - box-shadow: none
                              - padding-right: 5px
                            grid:
                              - grid-template-areas: "'i n' 'i l'"
                              - grid-template-columns: min-content
                              - column-gap: 10px
                            icon:
                              - width: 20px
                              - color: var(--red)
                            img_cell:
                              - width: 20px
                            name:
                              - justify-self: start
                              - font-size: 10px
                              - font-weight: 500
                              - color: var(--contrast14)
                            label:
                              - justify-self: start
                              - font-size: 15px
                              - font-weight: 700
                          tap_action:
                            action: navigate
                            navigation_path: "#climate"
                      item2:
                        card:
                          type: custom:button-card
                          icon: mdi:lightning-bolt
                          name: Energy
                          label: >-
                            [[[ return
                            states["sensor.washer_energy_yesterday"].state + "
                            kWh" ]]]
                          show_label: true
                          styles:
                            card:
                              - border-radius: 0px
                              - box-shadow: none
                              - padding-right: 5px
                            grid:
                              - grid-template-areas: "'i n' 'i l'"
                              - grid-template-columns: min-content
                              - column-gap: 10px
                            icon:
                              - width: 20px
                              - color: var(--yellow)
                            img_cell:
                              - width: 20px
                            name:
                              - justify-self: start
                              - font-size: 10px
                              - font-weight: 500
                              - color: var(--contrast14)
                            label:
                              - justify-self: start
                              - font-size: 15px
                              - font-weight: 700
                          tap_action:
                            action: navigate
                            navigation_path: energy
                      item3:
                        card:
                          type: custom:button-card
                          icon: mdi:water-percent
                          name: Humidity
                          label: >-
                            [[[ return
                            states["sensor.living_room_humidity"].state + "%"]]]
                          show_label: true
                          styles:
                            card:
                              - border-radius: 0px
                              - box-shadow: none
                              - padding-right: 5px
                            grid:
                              - grid-template-areas: "'i n' 'i l'"
                              - grid-template-columns: min-content
                              - column-gap: 10px
                            icon:
                              - width: 20px
                              - color: var(--blue)
                            img_cell:
                              - width: 20px
                            name:
                              - justify-self: start
                              - font-size: 10px
                              - font-weight: 500
                              - color: var(--contrast14)
                            label:
                              - justify-self: start
                              - font-size: 15px
                              - font-weight: 700
                          tap_action:
                            action: navigate
                            navigation_path: "#climate"
                  - type: grid
                    square: true
                    columns: 5
                    cards:
                      - type: custom:button-card
                        entity: media_player.living_room
                        icon: mdi:speaker-play
                        show_name: false
                        aspect_ratio: 1/1
                        tap_action:
                          action: toggle
                          haptic: success
                        hold_action:
                          action: more-info
                        styles:
                          card:
                            - border-radius: 18px
                            - background-color: var(--green)
                          icon:
                            - color: |
                                [[[
                                  if (entity.state == "playing") return "var(--white)";
                                  else return "var(--black)";
                                ]]]
                      - type: custom:button-card
                        entity: light.living_room_lights
                        show_name: false
                        aspect_ratio: 1/1
                        tap_action:
                          action: toggle
                          haptic: success
                        hold_action:
                          action: more-info
                        styles:
                          card:
                            - border-radius: 18px
                            - background-color: var(--yellow)
                          icon:
                            - color: |
                                [[[
                                  if (entity.state == "on") return "var(--white)";
                                  else return "var(--black)";
                                ]]]
                      - type: custom:button-card
                        entity: lock.front_door_bolt
                        show_name: false
                        aspect_ratio: 1/1
                        tap_action:
                          action: call-service
                          service: lock.lock
                          service_data:
                            entity_id: lock.front_door_bolt
                          haptic: success
                        hold_action:
                          action: more-info
                        styles:
                          card:
                            - border-radius: 18px
                            - background-color: var(--red)
                          icon:
                            - color: |
                                [[[
                                  if (entity.state == "unlocked") return "var(--white)";
                                  else return "var(--black)";
                                ]]]
                      - type: custom:button-card
                        entity: switch.wright_guest
                        icon: mdi:wifi-off
                        show_name: false
                        aspect_ratio: 1/1
                        state:
                          - value: "on"
                            icon: mdi:wifi
                        tap_action:
                          action: toggle
                          haptic: success
                        hold_action:
                          action: more-info
                        styles:
                          card:
                            - border-radius: 18px
                            - background-color: var(--blue)
                          icon:
                            - color: |
                                [[[
                                  if (entity.state == "on") return "var(--white)";
                                  else return "var(--black)";
                                ]]]
                      - type: custom:button-card
                        entity: switch.front_camera_detect
                        icon: mdi:cctv-off
                        show_name: false
                        aspect_ratio: 1/1
                        state:
                          - value: "on"
                            icon: mdi:cctv
                        tap_action:
                          action: toggle
                          haptic: success
                        hold_action:
                          action: more-info
                        styles:
                          card:
                            - border-radius: 18px
                            - background-color: var(--purple)
                          icon:
                            - color: |
                                [[[
                                  if (entity.state == "on") return "var(--white)";
                                  else return "var(--black)";
                                ]]]
                  - type: custom:button-card
                    styles:
                      grid:
                        - grid-template-areas: "'item1 item2 item3'"
                        - grid-template-columns: 1fr 1fr 1fr
                      card:
                        - padding: 15px
                      custom_fields:
                        item1:
                          - justify-self: start
                        item2:
                          - justify-self: center
                        item3:
                          - justify-self: end
                    custom_fields:
                      item1:
                        card:
                          type: custom:button-card
                          icon: mdi:alarm-off
                          name: Alarm
                          label: N/A
                          show_label: true
                          styles:
                            card:
                              - border-radius: 0px
                              - box-shadow: none
                              - padding-right: 5px
                            grid:
                              - grid-template-areas: "'i n' 'i l'"
                              - grid-template-columns: min-content
                              - column-gap: 10px
                            icon:
                              - width: 20px
                              - color: var(--contrast10)
                            img_cell:
                              - width: 20px
                            name:
                              - justify-self: start
                              - font-size: 10px
                              - font-weight: 500
                              - color: var(--contrast14)
                            label:
                              - justify-self: start
                              - font-size: 15px
                              - font-weight: 700
                          tap_action:
                            action: none
                      item2:
                        card:
                          type: custom:button-card
                          entity: vacuum.p10_pro_ultra
                          icon: mdi:robot-vacuum-alert
                          name: Vacuum
                          label: Error
                          show_label: true
                          state:
                            - value: docked
                              label: Docked
                              icon: mdi:robot-vacuum-off
                              styles:
                                icon:
                                  - color: var(--contrast10)
                            - value: cleaning
                              label: Cleaning
                              icon: mdi:robot-vacuum
                              styles:
                                icon:
                                  - color: var(--blue)
                          styles:
                            card:
                              - border-radius: 0px
                              - box-shadow: none
                              - padding-right: 5px
                            grid:
                              - grid-template-areas: "'i n' 'i l'"
                              - grid-template-columns: min-content
                              - column-gap: 10px
                            icon:
                              - width: 20px
                              - color: var(--red)
                            img_cell:
                              - width: 20px
                            name:
                              - justify-self: start
                              - font-size: 10px
                              - font-weight: 500
                              - color: var(--contrast14)
                            label:
                              - justify-self: start
                              - font-size: 15px
                              - font-weight: 700
                          tap_action:
                            action: more-info
                          double_tap_action:
                            action: more-info
                      item3:
                        card:
                          type: custom:button-card
                          entity: sensor.washer_current_status
                          icon: mdi:washing-machine-off
                          name: Washer
                          label: "Off"
                          show_label: true
                          state:
                            - value: "Off"
                              label: "Off"
                              icon: mdi:washing-machine-off
                              styles:
                                icon:
                                  - color: var(--contrast10)
                            - value: Idle
                              label: Idle
                              icon: mdi:washing-machine
                              styles:
                                icon:
                                  - color: var(--contrast20)
                            - value: Running
                              label: Running
                              icon: mdi:washing-machine
                              styles:
                                icon:
                                  - color: var(--blue)
                            - value: Clean
                              label: Done
                              icon: mdi:washing-machine
                              styles:
                                icon:
                                  - color: var(--green)
                          styles:
                            card:
                              - border-radius: 0px
                              - box-shadow: none
                              - padding-right: 5px
                            grid:
                              - grid-template-areas: "'i n' 'i l'"
                              - grid-template-columns: min-content
                              - column-gap: 10px
                            icon:
                              - width: 20px
                              - color: var(--red)
                            img_cell:
                              - width: 20px
                            name:
                              - justify-self: start
                              - font-size: 10px
                              - font-weight: 500
                              - color: var(--contrast14)
                            label:
                              - justify-self: start
                              - font-size: 15px
                              - font-weight: 700
                          tap_action:
                            action: more-info
                          double_tap_action:
                            action: more-info
            visibility:
              - condition: screen
                media_query: "(min-width: 0px) and (max-width: 767px)"
        visibility:
          - condition: screen
            media_query: "(min-width: 0px) and (max-width: 767px)"
      - type: custom:decluttering-card
        template: footer_template
    visibility:
      - condition: screen
        media_query: "(min-width: 0px) and (max-width: 767px)"
  - type: grid
    cards:
      - type: custom:navbar-card
        desktop:
          position: left
          min_width: 768
          show_labels: true
        mobile:
          show_labels: true
        routes:
          - icon: mdi:home-outline
            icon_selected: mdi:home-assistant
            url: /dashboard-tablet/home
            label: Home
            selected: |
              [[[
                if (location.hash == '#living-room') return false;
                else if (location.hash == '#kitchen') return false;
                else if (location.hash == '#master-bedroom') return false;
                else if (location.hash == '#master-bathroom') return false;
                else if (location.hash == '#office') return false;
                else if (location.hash == '#first-floor-bathroom') return false;
                else if (location.hash == '#east-west-bedrooms') return false;
                else if (location.hash == '#basement') return false;
                else if (location.hash == '#basement-bathroom') return false;
                else if (location.hash == '#laundry-room') return false;
                else if (location.hash == '#garage') return false;
                else if (location.hash == '#outdoors') return false;
                else return true;
              ]]]
          - icon: mdi:sofa-outline
            icon_selected: mdi:sofa
            label: Rooms
            selected: |
              [[[
                if (location.hash == '#living-room') return true;
                else if (location.hash == '#kitchen') return true;
                else if (location.hash == '#master-bedroom') return true;
                else if (location.hash == '#master-bathroom') return true;
                else if (location.hash == '#office') return true;
                else if (location.hash == '#first-floor-bathroom') return true;
                else if (location.hash == '#east-west-bedrooms') return true;
                else if (location.hash == '#basement') return true;
                else if (location.hash == '#basement-bathroom') return true;
                else if (location.hash == '#laundry-room') return true;
                else if (location.hash == '#garage') return true;
                else if (location.hash == '#outdoors') return true;
                else return false;
              ]]]
            badge:
              show: >
                [[[ return states['sensor.lights_on_dashboard_counter'].state >
                0 ]]]
              color: var(--yellow-color)
              count: >
                [[[ return states['sensor.lights_on_dashboard_counter'].state
                ]]]
            tap_action:
              action: open-popup
            popup:
              - icon: mdi:sofa-outline
                url: /dashboard-tablet/home#living-room
                label: Living Room
              - icon: mdi:silverware-variant
                url: /dashboard-tablet/home#kitchen
                label: Kitchen
              - icon: mdi:bed-king-outline
                url: /dashboard-tablet/home#master-bedroom
                label: Master Bedroom
              - icon: mdi:shower
                url: /dashboard-tablet/home#master-bathroom
                label: Master Bath
              - icon: mdi:monitor
                url: /dashboard-tablet/home#office
                label: Office
              - icon: mdi:shower
                url: /dashboard-tablet/home#first-floor-bathroom
                label: 1st Floor Bath
              - icon: mdi:bed-outline
                url: /dashboard-tablet/home#east-west-bedrooms
                label: E & W Bedrooms
              - icon: mdi:stairs-down
                url: /dashboard-tablet/home#basement
                label: Basement
              - icon: mdi:shower
                url: /dashboard-tablet/home#basement-bathroom
                label: Basement Bath
              - icon: mdi:washing-machine
                url: /dashboard-tablet/home#laundry-room
                label: Laundry Room
              - icon: mdi:garage
                url: /dashboard-tablet/home#garage
                label: Garage
              - icon: mdi:tree-outline
                url: /dashboard-tablet/home#outdoors
                label: Outdoors
          - icon: mdi:music
            url: /dashboard-tablet/music
            label: Music
            badge:
              show: >
                [[[ return states['media_player.living_room'].state ===
                'playing' ]]]
              color: var(--green-color)
          - icon: mdi:shield-outline
            icon_selected: mdi:security
            url: /dashboard-tablet/security
            label: Security
            badge:
              show: >
                [[[ return states['binary_sensor.door_sensor_door'].state ===
                'on' || states['binary_sensor.door_sensor_door_2'].state ===
                'on' ]]]
              color: var(--red-color)
          - icon: mdi:weather-partly-cloudy
            url: /dashboard-tablet/home#weather
            label: Weather
            selected: |
              [[[
                return location.hash == '#weather';
              ]]]
          - icon: mdi:dots-horizontal
            label: More
            badge:
              show: |
                [[[
                  if (states['update.home_assistant_core_update'].state == "on") return true;
                  else if (states['update.home_assistant_supervisor_update'].state == "on") return true;
                  else if (states['sensor.davids_iphone_battery_level'].state < 20) return true;
                  else return false;
                ]]]
              color: var(--red-color)
            tap_action:
              action: open-popup
            popup:
              - icon: mdi:server-outline
                url: /dashboard-tablet/server
                label: Server
                badge:
                  show: |
                    [[[
                      if (states['sensor.davids_iphone_battery_level'].state < 20) return true;
                      else return false;
                    ]]]
                  color: var(--red-color)
              - icon: mdi:cart
                url: /dashboard-bring/home
                label: Shopping List
                badge:
                  show: |
                    [[[ return states['todo.shopping_list'].state > 0 ]]]
                  color: var(--red-color)
                  count: |
                    [[[ return states['todo.shopping_list'].state ]]]
              - icon: mdi:cog
                url: /config/dashboard
                label: Settings
                badge:
                  show: >
                    [[[ return states['update.home_assistant_core_update'].state
                    === 'on' ]]]
                  color: var(--red-color)
              - icon: mdi:hammer
                url: /developer-tools/yaml
                label: Developer Tools
        styles: |
          .navbar {
            --navbar-primary-color: var(--purple-color);
            background: var(--contrast2);
          }
      - type: vertical-stack
        cards:
          - type: heading
            heading: Rooms
            heading_style: title
            icon: mdi:floor-plan
            visibility:
              - condition: screen
                media_query: "(min-width: 768px)"
            badges:
              - type: entity
                show_state: true
                show_icon: true
                entity: input_boolean.all_rooms
                name: Show all
                state_content: name
                color: purple
                tap_action:
                  action: toggle
        visibility:
          - condition: screen
            media_query: "(min-width: 768px)"
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: separator
            name: Rooms
            icon: mdi:floor-plan
            sub_button:
              - entity: input_boolean.rooms_quick_access
                tap_action:
                  action: toggle
                visibility:
                  - condition: user
                    users:
                      - 3eea636aa3de4c7f9c662ad29c6e92e0
            styles: |-
              .bubble-sub-button-1 {
                  background-color: ${hass.states['input_boolean.rooms_quick_access'].state === 'on' ? 'var(--green)' : 'var(--contrast1)'} !important;
                  color: ${hass.states['input_boolean.rooms_quick_access'].state === 'on' ? 'var(--black)' : 'var(--contrast20)'} !important;
              }
          - type: custom:bubble-card
            card_type: empty-column
            visibility:
              - condition: state
                entity: input_boolean.rooms_quick_access
                state: "on"
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: climate
                button_type: slider
                entity: climate.living_room
                icon: mdi:lightbulb-group
                tap_action:
                  action: perform-action
                  perform_action: light.toggle
                  target:
                    entity_id: light.living_room_lights
                sub_button:
                  - entity: media_player.living_room_apple_tv
                    icon: mdi:television
                  - entity: media_player.living_room
                    icon: mdi:music
                    tap_action:
                      action: toggle
                force_icon: false
                show_state: true
                show_last_changed: false
                show_attribute: true
                state_color: false
                slider_live_update: false
                name: Living Room
                attribute: current_temperature
                styles: >-
                  .bubble-icon {
                    color: ${hass.states['light.living_room_lights'].state === 'on' ? 'var(--black)' : 'var(--contrast20)'} !important;
                  }

                  ha-card {
                    --bubble-icon-background-color: ${hass.states['light.living_room_lights'].state === 'on' ? 'var(--yellow)' : 'var(--contrast1)'} !important;
                  }

                  .bubble-sub-button-1 {
                      background-color: ${hass.states['media_player.living_room_apple_tv'].state === 'on' ? 'var(--purple)' : 'var(--contrast3)'} !important;
                      color: ${hass.states['media_player.living_room_apple_tv'].state === 'on' ? 'var(--black)' : 'var(--contrast20)'} !important;
                  }

                  .bubble-sub-button-2 {
                      background-color: ${hass.states['media_player.living_room'].state === 'playing' ? 'var(--green)' : 'var(--contrast3)'} !important;
                      color: ${hass.states['media_player.living_room'].state === 'playing' ? 'var(--black)' : 'var(--contrast20)'} !important;
                  }

                  ${icon.setAttribute("icon",
                  hass.states['light.living_room_lights'].state === 'on' ?
                  'mdi:lightbulb-group' : 'mdi:lightbulb-group-outline')}
                visibility:
                  - condition: state
                    entity: input_boolean.rooms_quick_access
                    state: "on"
              - type: custom:bubble-card
                card_type: climate
                button_type: slider
                entity: light.office_ceiling_main
                icon: mdi:lightbulb-group
                tap_action:
                  action: perform-action
                  perform_action: light.toggle
                  target:
                    entity_id: light.office_ceiling_main
                sub_button:
                  - entity: light.office_lamp
                    tap_action:
                      action: toggle
                  - entity: media_player.office
                    icon: mdi:music
                    tap_action:
                      action: toggle
                force_icon: false
                show_state: true
                show_last_changed: false
                show_attribute: false
                state_color: false
                slider_live_update: false
                name: Office
                styles: >-
                  .bubble-icon {
                    color: ${hass.states['light.office_ceiling_main'].state === 'on' ? 'var(--black)' : 'var(--contrast20)'} !important;
                  }

                  ha-card {
                    --bubble-icon-background-color: ${hass.states['light.office_ceiling_main'].state === 'on' ? 'var(--yellow)' : 'var(--contrast1)'} !important;
                  }

                  .bubble-sub-button-1 {
                      background-color: ${hass.states['light.office_lamp'].state === 'on' ? 'var(--purple)' : 'var(--contrast3)'} !important;
                      color: ${hass.states['light.office_lamp'].state === 'on' ? 'var(--black)' : 'var(--contrast20)'} !important;
                  }

                  .bubble-sub-button-2 {
                      background-color: ${hass.states['media_player.office'].state === 'playing' ? 'var(--green)' : 'var(--contrast3)'} !important;
                      color: ${hass.states['media_player.office'].state === 'playing' ? 'var(--black)' : 'var(--contrast20)'} !important;
                  }

                  ${icon.setAttribute("icon",
                  hass.states['light.office_ceiling_main'].state === 'on' ?
                  'mdi:lightbulb-group' : 'mdi:lightbulb-group-outline')}
                visibility:
                  - condition: state
                    entity: input_boolean.rooms_quick_access
                    state: "on"
              - type: custom:bubble-card
                card_type: climate
                button_type: slider
                entity: light.master_bedroom_rear
                icon: mdi:lightbulb-group
                tap_action:
                  action: perform-action
                  perform_action: light.toggle
                  target:
                    entity_id: light.master_bedroom_rear
                sub_button:
                  - entity: fan.dyson_fan
                    icon: mdi:fan
                    tap_action:
                      action: toggle
                force_icon: false
                show_state: true
                show_last_changed: false
                show_attribute: false
                state_color: false
                slider_live_update: false
                name: Bedroom
                styles: >-
                  .bubble-icon {
                    color: ${hass.states['light.master_bedroom_rear'].state === 'on' ? 'var(--black)' : 'var(--contrast20)'} !important;
                  }

                  ha-card {
                    --bubble-icon-background-color: ${hass.states['light.master_bedroom_rear'].state === 'on' ? 'var(--yellow)' : 'var(--contrast1)'} !important;
                  }

                  .bubble-sub-button-1 {
                      background-color: ${hass.states['fan.dyson_fan'].state === 'on' ? 'var(--blue)' : 'var(--contrast3)'} !important;
                      color: ${hass.states['fan.dyson_fan'].state === 'on' ? 'var(--black)' : 'var(--contrast20)'} !important;
                  }

                  ${icon.setAttribute("icon",
                  hass.states['light.master_bedroom_rear'].state === 'on' ?
                  'mdi:lightbulb-group' : 'mdi:lightbulb-group-outline')}
                visibility:
                  - condition: state
                    entity: input_boolean.rooms_quick_access
                    state: "on"
              - type: custom:bubble-card
                card_type: climate
                button_type: slider
                entity: light.kitchen
                icon: mdi:lightbulb-group
                tap_action:
                  action: perform-action
                  perform_action: light.toggle
                  target:
                    entity_id: light.kitchen
                sub_button:
                  - entity: light.under_cabinet_lights
                    icon: mdi:lightbulb
                    tap_action:
                      action: toggle
                force_icon: false
                show_state: true
                show_last_changed: false
                show_attribute: false
                state_color: false
                slider_live_update: false
                name: Kitchen
                styles: >-
                  .bubble-icon {
                    color: ${hass.states['light.kitchen'].state === 'on' ? 'var(--black)' : 'var(--contrast20)'} !important;
                  }

                  ha-card {
                    --bubble-icon-background-color: ${hass.states['light.kitchen'].state === 'on' ? 'var(--yellow)' : 'var(--contrast1)'} !important;
                  }

                  .bubble-sub-button-1 {
                      background-color: ${hass.states['light.under_cabinet_lights'].state === 'on' ? 'var(--purple)' : 'var(--contrast3)'} !important;
                      color: ${hass.states['light.under_cabinet_lights'].state === 'on' ? 'var(--black)' : 'var(--contrast20)'} !important;
                  }

                  ${icon.setAttribute("icon", hass.states['light.kitchen'].state
                  === 'on' ? 'mdi:lightbulb-group' :
                  'mdi:lightbulb-group-outline')}
                visibility:
                  - condition: state
                    entity: input_boolean.rooms_quick_access
                    state: "on"
              - type: custom:bubble-card
                card_type: climate
                button_type: slider
                entity: climate.floor_thermostat
                icon: mdi:lightbulb-group
                tap_action:
                  action: perform-action
                  perform_action: light.toggle
                  target:
                    entity_id: light.master_bathroom_vanity
                sub_button:
                  - entity: fan.master_bathroom_fan
                    icon: mdi:fan
                    tap_action:
                      action: toggle
                force_icon: false
                show_state: true
                show_last_changed: false
                show_attribute: true
                state_color: false
                slider_live_update: false
                name: Master Bathroom
                attribute: current_temperature
                styles: >-
                  .bubble-icon {
                    color: ${hass.states['light.master_bathroom_vanity'].state === 'on' ? 'var(--black)' : 'var(--contrast20)'} !important;
                  }

                  ha-card {
                    --bubble-icon-background-color: ${hass.states['light.master_bathroom_vanity'].state === 'on' ? 'var(--yellow)' : 'var(--contrast1)'} !important;
                  }

                  .bubble-sub-button-1 {
                      background-color: ${hass.states['fan.master_bathroom_fan'].state === 'on' ? 'var(--blue)' : 'var(--contrast3)'} !important;
                      color: ${hass.states['fan.master_bathroom_fan'].state === 'on' ? 'var(--black)' : 'var(--contrast20)'} !important;
                  }

                  ${icon.setAttribute("icon",
                  hass.states['light.master_bathroom_vanity'].state === 'on' ?
                  'mdi:lightbulb-group' : 'mdi:lightbulb-group-outline')}
                visibility:
                  - condition: state
                    entity: input_boolean.rooms_quick_access
                    state: "on"
            visibility:
              - condition: user
                users:
                  - 3eea636aa3de4c7f9c662ad29c6e92e0
          - type: custom:bubble-card
            card_type: empty-column
            visibility:
              - condition: state
                entity: input_boolean.rooms_quick_access
                state: "on"
        visibility:
          - condition: screen
            media_query: "(min-width: 0px) and (max-width: 767px)"
      - type: custom:swipe-card
        card_width: 100%
        parameters:
          slidesPerView: 1
          spaceBetween: 16
          pagination:
            el: .swiper-pagination
            clickable: true
        cards:
          # Page 1: Living Room, Kitchen, Master Bedroom, Master Bathroom, Office, First Floor Bath
          - type: grid
            square: false
            columns: 2
            cards:
              - type: vertical-stack
                cards:
                  - type: custom:button-card
                    entity: light.living_room_lights
                    variables:
                      name: |
                        [[[ return 'Living<br>Room']]]
                      radius: 24px
                    icon: |
                      [[[
                        if (states['binary_sensor.door_sensor_door'].state == "on") return "mdi:window-open-variant";
                        else if (states['climate.living_room'].state == "heat") return "mdi:fire-circle";
                        else if (states['media_player.living_room'].state == "playing") return "mdi:music";
                        else return "mdi:sofa-outline";
                      ]]]
                    name: "[[[ return variables.name ]]]"
                    tap_action:
                      action: navigate
                      navigation_path: "#living-room"
                      haptic: medium
                    hold_action:
                      action: toggle
                      haptic: medium
                    state:
                      - value: "on"
                        styles:
                          card:
                            - height: 155px
                          grid:
                            - grid-template-areas: "\"n i\" \"slider slider\""
                            - grid-template-rows: 1fr min-content
                            - grid-template-columns: min-content 1fr
                        custom_fields:
                          slider:
                            card:
                              type: custom:my-slider-v2
                              entity: "[[[ return entity.entity_id ]]]"
                              colorMode: brightness
                              styles:
                                container:
                                  - background: none
                                  - border-radius: 0px
                                  - overflow: visible
                                card:
                                  - height: 25px
                                  - padding: 0px
                                  - background: rgba(var(--contrast1-RGB),var(--color-tint))
                                  - border-radius: 0px
                                  - width: 100%
                                  - position: absolute
                                  - margin-top: "-15px"
                                  - margin-left: "-8px"
                                track:
                                  - overflow: visible
                                  - background: none
                                progress:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "linear-gradient(90deg, rgba(255,255,255, 0.3) 0%, rgba(255,255,255, 1) 100%)";
                                        else return "var(--contrast4)";
                                      ]]]
                                thumb:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "var(--black)";
                                        if (entity.state == "off") return "var(--contrast20)";
                                        else return "var(--contrast8)";
                                      ]]]
                                  - top: 0px
                                  - right: "-6px"
                                  - height: 25px
                                  - width: 3px
                    styles:
                      card:
                        - padding: 8px
                        - height: 130px
                        - border-radius: "[[[ return variables.radius ]]]"
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--yellow)";
                              else return "var(--contrast2)";
                            ]]]
                      grid:
                        - grid-template-areas: "\"n i\""
                        - grid-template-rows: 1fr
                        - grid-template-columns: min-content 1fr
                      icon:
                        - width: 24px
                        - color: |
                            [[[
                              if (states['binary_sensor.door_sensor_door'].state == "on") return "var(--black)";
                              else if (states['climate.living_room'].state == "heat") return "var(--black)";
                              else if (entity.state == "on") return "var(--contrast20)";
                              else return "var(--contrast20)";
                            ]]]
                      img_cell:
                        - justify-self: end
                        - background: |
                            [[[
                              if (states['binary_sensor.door_sensor_door'].state == "on") return "var(--red)";
                              else if (states['climate.living_room'].state == "heat") return "var(--red)";
                              else if (entity.state == "on") return "var(--contrast1)";
                              else return "var(--contrast1)";
                            ]]]
                        - border-radius: 100%
                        - align-self: start
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - align-self: start
                        - text-align: left
                        - font-size: 1em
                        - font-weight: 500
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                        - padding: 14px
                  # Master Bedroom card
                  - type: custom:button-card
                    entity: light.master_bedroom_rear
                    variables:
                      name: |
                        [[[ return 'Master<br>Bedroom']]]
                      radius: 24px
                    icon: mdi:bed-king-outline
                    name: "[[[ return variables.name ]]]"
                    tap_action:
                      action: navigate
                      navigation_path: "#master-bedroom"
                      haptic: medium
                    hold_action:
                      action: toggle
                      haptic: medium
                    state:
                      - value: "on"
                        styles:
                          card:
                            - height: 155px
                          grid:
                            - grid-template-areas: "\"n i\" \"slider slider\""
                            - grid-template-rows: 1fr min-content
                            - grid-template-columns: min-content 1fr
                        custom_fields:
                          slider:
                            card:
                              type: custom:my-slider-v2
                              entity: "[[[ return entity.entity_id ]]]"
                              colorMode: brightness
                              styles:
                                container:
                                  - background: none
                                  - border-radius: 0px
                                  - overflow: visible
                                card:
                                  - height: 25px
                                  - padding: 0px
                                  - background: rgba(var(--contrast1-RGB),var(--color-tint))
                                  - border-radius: 0px
                                  - width: 100%
                                  - position: absolute
                                  - margin-top: "-15px"
                                  - margin-left: "-8px"
                                track:
                                  - overflow: visible
                                  - background: none
                                progress:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "linear-gradient(90deg, rgba(255,255,255, 0.3) 0%, rgba(255,255,255, 1) 100%)";
                                        else return "var(--contrast4)";
                                      ]]]
                                thumb:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "var(--black)";
                                        if (entity.state == "off") return "var(--contrast20)";
                                        else return "var(--contrast8)";
                                      ]]]
                                  - top: 0px
                                  - right: "-6px"
                                  - height: 25px
                                  - width: 3px
                    styles:
                      card:
                        - padding: 8px
                        - height: 130px
                        - border-radius: "[[[ return variables.radius ]]]"
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--yellow)";
                              else return "var(--contrast2)";
                            ]]]
                      grid:
                        - grid-template-areas: "\"n i\""
                        - grid-template-rows: 1fr
                        - grid-template-columns: min-content 1fr
                      icon:
                        - width: 24px
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--contrast20)";
                              else return "var(--contrast20)";
                            ]]]
                      img_cell:
                        - justify-self: end
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--contrast1)";
                              else return "var(--contrast1)";
                            ]]]
                        - border-radius: 100%
                        - align-self: start
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - align-self: start
                        - text-align: left
                        - font-size: 1em
                        - font-weight: 500
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                        - padding: 14px
                  # Office card
                  - type: custom:button-card
                    entity: light.office_ceiling_main
                    variables:
                      name: Office
                      radius: 24px
                    icon: |
                      [[[
                        if (states['media_player.office'].state == "playing") return "mdi:music";
                        else return "mdi:monitor";
                      ]]]
                    name: "[[[ return variables.name ]]]"
                    tap_action:
                      action: navigate
                      navigation_path: "#office"
                      haptic: medium
                    hold_action:
                      action: toggle
                      haptic: medium
                    state:
                      - value: "on"
                        styles:
                          card:
                            - height: 155px
                          grid:
                            - grid-template-areas: "\"n i\" \"slider slider\""
                            - grid-template-rows: 1fr min-content
                            - grid-template-columns: min-content 1fr
                        custom_fields:
                          slider:
                            card:
                              type: custom:my-slider-v2
                              entity: "[[[ return entity.entity_id ]]]"
                              colorMode: brightness
                              styles:
                                container:
                                  - background: none
                                  - border-radius: 0px
                                  - overflow: visible
                                card:
                                  - height: 25px
                                  - padding: 0px
                                  - background: rgba(var(--contrast1-RGB),var(--color-tint))
                                  - border-radius: 0px
                                  - width: 100%
                                  - position: absolute
                                  - margin-top: "-15px"
                                  - margin-left: "-8px"
                                track:
                                  - overflow: visible
                                  - background: none
                                progress:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "linear-gradient(90deg, rgba(255,255,255, 0.3) 0%, rgba(255,255,255, 1) 100%)";
                                        else return "var(--contrast4)";
                                      ]]]
                                thumb:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "var(--black)";
                                        if (entity.state == "off") return "var(--contrast20)";
                                        else return "var(--contrast8)";
                                      ]]]
                                  - top: 0px
                                  - right: "-6px"
                                  - height: 25px
                                  - width: 3px
                    styles:
                      card:
                        - padding: 8px
                        - height: 130px
                        - border-radius: "[[[ return variables.radius ]]]"
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--yellow)";
                              else return "var(--contrast2)";
                            ]]]
                      grid:
                        - grid-template-areas: "\"n i\""
                        - grid-template-rows: 1fr
                        - grid-template-columns: min-content 1fr
                      icon:
                        - width: 24px
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--contrast20)";
                              else return "var(--contrast20)";
                            ]]]
                      img_cell:
                        - justify-self: end
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--contrast1)";
                              else return "var(--contrast1)";
                            ]]]
                        - border-radius: 100%
                        - align-self: start
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - align-self: start
                        - text-align: left
                        - font-size: 1em
                        - font-weight: 500
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                        - padding: 14px
              # Right column - Page 1
              - type: vertical-stack
                cards:
                  # Kitchen card
                  - type: custom:button-card
                    entity: light.kitchen
                    variables:
                      name: Kitchen
                      radius: 24px
                    icon: |
                      [[[
                        if (states['binary_sensor.door_sensor_door_2'].state == "on") return "mdi:door-open";
                        else return "mdi:silverware-variant";
                      ]]]
                    name: "[[[ return variables.name ]]]"
                    tap_action:
                      action: navigate
                      navigation_path: "#kitchen"
                      haptic: medium
                    hold_action:
                      action: toggle
                      haptic: medium
                    state:
                      - value: "on"
                        styles:
                          card:
                            - height: 155px
                          grid:
                            - grid-template-areas: "\"n i\" \"slider slider\""
                            - grid-template-rows: 1fr min-content
                            - grid-template-columns: min-content 1fr
                        custom_fields:
                          slider:
                            card:
                              type: custom:my-slider-v2
                              entity: "[[[ return entity.entity_id ]]]"
                              colorMode: brightness
                              styles:
                                container:
                                  - background: none
                                  - border-radius: 0px
                                  - overflow: visible
                                card:
                                  - height: 25px
                                  - padding: 0px
                                  - background: rgba(var(--contrast1-RGB),var(--color-tint))
                                  - border-radius: 0px
                                  - width: 100%
                                  - position: absolute
                                  - margin-top: "-15px"
                                  - margin-left: "-8px"
                                track:
                                  - overflow: visible
                                  - background: none
                                progress:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "linear-gradient(90deg, rgba(255,255,255, 0.3) 0%, rgba(255,255,255, 1) 100%)";
                                        else return "var(--contrast4)";
                                      ]]]
                                thumb:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "var(--black)";
                                        if (entity.state == "off") return "var(--contrast20)";
                                        else return "var(--contrast8)";
                                      ]]]
                                  - top: 0px
                                  - right: "-6px"
                                  - height: 25px
                                  - width: 3px
                    styles:
                      card:
                        - padding: 8px
                        - height: 130px
                        - border-radius: "[[[ return variables.radius ]]]"
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--yellow)";
                              else return "var(--contrast2)";
                            ]]]
                      grid:
                        - grid-template-areas: "\"n i\""
                        - grid-template-rows: 1fr
                        - grid-template-columns: min-content 1fr
                      icon:
                        - width: 24px
                        - color: |
                            [[[
                              if (states['binary_sensor.door_sensor_door_2'].state == "on") return "var(--black)";
                              else if (entity.state == "on") return "var(--contrast20)";
                              else return "var(--contrast20)";
                            ]]]
                      img_cell:
                        - justify-self: end
                        - background: |
                            [[[
                              if (states['binary_sensor.door_sensor_door_2'].state == "on") return "var(--red)";
                              else if (entity.state == "on") return "var(--contrast1)";
                              else return "var(--contrast1)";
                            ]]]
                        - border-radius: 100%
                        - align-self: start
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - align-self: start
                        - text-align: left
                        - font-size: 1em
                        - font-weight: 500
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                        - padding: 14px
                  # Master Bathroom card
                  - type: custom:button-card
                    entity: light.master_bathroom_vanity
                    variables:
                      name: |
                        [[[ return 'Master<br>Bath']]]
                      radius: 24px
                    icon: |
                      [[[
                        if (states['binary_sensor.leak_sensor_moisture'].state == "on") return "mdi:water-alert";
                        else if (states['climate.floor_thermostat'].state == "heat") return "mdi:fire-circle";
                        else return "mdi:shower";
                      ]]]
                    name: "[[[ return variables.name ]]]"
                    tap_action:
                      action: navigate
                      navigation_path: "#master-bathroom"
                      haptic: medium
                    hold_action:
                      action: toggle
                      haptic: medium
                    state:
                      - value: "on"
                        styles:
                          card:
                            - height: 155px
                          grid:
                            - grid-template-areas: "\"n i\" \"slider slider\""
                            - grid-template-rows: 1fr min-content
                            - grid-template-columns: min-content 1fr
                        custom_fields:
                          slider:
                            card:
                              type: custom:my-slider-v2
                              entity: "[[[ return entity.entity_id ]]]"
                              colorMode: brightness
                              styles:
                                container:
                                  - background: none
                                  - border-radius: 0px
                                  - overflow: visible
                                card:
                                  - height: 25px
                                  - padding: 0px
                                  - background: rgba(var(--contrast1-RGB),var(--color-tint))
                                  - border-radius: 0px
                                  - width: 100%
                                  - position: absolute
                                  - margin-top: "-15px"
                                  - margin-left: "-8px"
                                track:
                                  - overflow: visible
                                  - background: none
                                progress:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "linear-gradient(90deg, rgba(255,255,255, 0.3) 0%, rgba(255,255,255, 1) 100%)";
                                        else return "var(--contrast4)";
                                      ]]]
                                thumb:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "var(--black)";
                                        if (entity.state == "off") return "var(--contrast20)";
                                        else return "var(--contrast8)";
                                      ]]]
                                  - top: 0px
                                  - right: "-6px"
                                  - height: 25px
                                  - width: 3px
                    styles:
                      card:
                        - padding: 8px
                        - height: 130px
                        - border-radius: "[[[ return variables.radius ]]]"
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--yellow)";
                              else return "var(--contrast2)";
                            ]]]
                      grid:
                        - grid-template-areas: "\"n i\""
                        - grid-template-rows: 1fr
                        - grid-template-columns: min-content 1fr
                      icon:
                        - width: 24px
                        - color: |
                            [[[
                              if (states['binary_sensor.leak_sensor_moisture'].state == "on") return "var(--black)";
                              else if (states['climate.floor_thermostat'].state == "heat") return "var(--black)";
                              else if (entity.state == "on") return "var(--contrast20)";
                              else return "var(--contrast20)";
                            ]]]
                      img_cell:
                        - justify-self: end
                        - background: |
                            [[[
                              if (states['binary_sensor.leak_sensor_moisture'].state == "on") return "var(--red)";
                              else if (states['climate.floor_thermostat'].state == "heat") return "var(--red)";
                              else if (entity.state == "on") return "var(--contrast1)";
                              else return "var(--contrast1)";
                            ]]]
                        - border-radius: 100%
                        - align-self: start
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - align-self: start
                        - text-align: left
                        - font-size: 1em
                        - font-weight: 500
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                        - padding: 14px
                  # First Floor Bathroom card
                  - type: custom:button-card
                    entity: light.first_floor_bathroom_vanity
                    variables:
                      name: |
                        [[[ return '1st Floor<br>Bath']]]
                      radius: 24px
                    icon: |
                      [[[
                        if (states['climate.floor_thermostat_2'].state == "heat") return "mdi:fire-circle";
                        else return "mdi:shower";
                      ]]]
                    name: "[[[ return variables.name ]]]"
                    tap_action:
                      action: navigate
                      navigation_path: "#first-floor-bathroom"
                      haptic: medium
                    hold_action:
                      action: toggle
                      haptic: medium
                    state:
                      - value: "on"
                        styles:
                          card:
                            - height: 155px
                          grid:
                            - grid-template-areas: "\"n i\" \"slider slider\""
                            - grid-template-rows: 1fr min-content
                            - grid-template-columns: min-content 1fr
                        custom_fields:
                          slider:
                            card:
                              type: custom:my-slider-v2
                              entity: "[[[ return entity.entity_id ]]]"
                              colorMode: brightness
                              styles:
                                container:
                                  - background: none
                                  - border-radius: 0px
                                  - overflow: visible
                                card:
                                  - height: 25px
                                  - padding: 0px
                                  - background: rgba(var(--contrast1-RGB),var(--color-tint))
                                  - border-radius: 0px
                                  - width: 100%
                                  - position: absolute
                                  - margin-top: "-15px"
                                  - margin-left: "-8px"
                                track:
                                  - overflow: visible
                                  - background: none
                                progress:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "linear-gradient(90deg, rgba(255,255,255, 0.3) 0%, rgba(255,255,255, 1) 100%)";
                                        else return "var(--contrast4)";
                                      ]]]
                                thumb:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "var(--black)";
                                        if (entity.state == "off") return "var(--contrast20)";
                                        else return "var(--contrast8)";
                                      ]]]
                                  - top: 0px
                                  - right: "-6px"
                                  - height: 25px
                                  - width: 3px
                    styles:
                      card:
                        - padding: 8px
                        - height: 130px
                        - border-radius: "[[[ return variables.radius ]]]"
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--yellow)";
                              else return "var(--contrast2)";
                            ]]]
                      grid:
                        - grid-template-areas: "\"n i\""
                        - grid-template-rows: 1fr
                        - grid-template-columns: min-content 1fr
                      icon:
                        - width: 24px
                        - color: |
                            [[[
                              if (states['climate.floor_thermostat_2'].state == "heat") return "var(--black)";
                              else if (entity.state == "on") return "var(--contrast20)";
                              else return "var(--contrast20)";
                            ]]]
                      img_cell:
                        - justify-self: end
                        - background: |
                            [[[
                              if (states['climate.floor_thermostat_2'].state == "heat") return "var(--red)";
                              else if (entity.state == "on") return "var(--contrast1)";
                              else return "var(--contrast1)";
                            ]]]
                        - border-radius: 100%
                        - align-self: start
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - align-self: start
                        - text-align: left
                        - font-size: 1em
                        - font-weight: 500
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                        - padding: 14px
          # Page 2: East & West Bedrooms, Basement, Basement Bathroom, Laundry Room, Garage, Outdoors
          - type: grid
            square: false
            columns: 2
            cards:
              - type: vertical-stack
                cards:
                  # East & West Bedrooms card
                  - type: custom:button-card
                    entity: light.east
                    variables:
                      name: |
                        [[[ return 'E & W<br>Bedrooms']]]
                      radius: 24px
                    icon: mdi:bed-outline
                    name: "[[[ return variables.name ]]]"
                    tap_action:
                      action: navigate
                      navigation_path: "#east-west-bedrooms"
                      haptic: medium
                    hold_action:
                      action: toggle
                      haptic: medium
                    state:
                      - value: "on"
                        styles:
                          card:
                            - height: 155px
                          grid:
                            - grid-template-areas: "\"n i\" \"slider slider\""
                            - grid-template-rows: 1fr min-content
                            - grid-template-columns: min-content 1fr
                        custom_fields:
                          slider:
                            card:
                              type: custom:my-slider-v2
                              entity: "[[[ return entity.entity_id ]]]"
                              colorMode: brightness
                              styles:
                                container:
                                  - background: none
                                  - border-radius: 0px
                                  - overflow: visible
                                card:
                                  - height: 25px
                                  - padding: 0px
                                  - background: rgba(var(--contrast1-RGB),var(--color-tint))
                                  - border-radius: 0px
                                  - width: 100%
                                  - position: absolute
                                  - margin-top: "-15px"
                                  - margin-left: "-8px"
                                track:
                                  - overflow: visible
                                  - background: none
                                progress:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "linear-gradient(90deg, rgba(255,255,255, 0.3) 0%, rgba(255,255,255, 1) 100%)";
                                        else return "var(--contrast4)";
                                      ]]]
                                thumb:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "var(--black)";
                                        if (entity.state == "off") return "var(--contrast20)";
                                        else return "var(--contrast8)";
                                      ]]]
                                  - top: 0px
                                  - right: "-6px"
                                  - height: 25px
                                  - width: 3px
                    styles:
                      card:
                        - padding: 8px
                        - height: 130px
                        - border-radius: "[[[ return variables.radius ]]]"
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--yellow)";
                              else return "var(--contrast2)";
                            ]]]
                      grid:
                        - grid-template-areas: "\"n i\""
                        - grid-template-rows: 1fr
                        - grid-template-columns: min-content 1fr
                      icon:
                        - width: 24px
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--contrast20)";
                              else return "var(--contrast20)";
                            ]]]
                      img_cell:
                        - justify-self: end
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--contrast1)";
                              else return "var(--contrast1)";
                            ]]]
                        - border-radius: 100%
                        - align-self: start
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - align-self: start
                        - text-align: left
                        - font-size: 1em
                        - font-weight: 500
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                        - padding: 14px
                  # Basement Bathroom card
                  - type: custom:button-card
                    entity: switch.basement_bathroom_vanity
                    variables:
                      name: |
                        [[[ return 'Basement<br>Bath']]]
                      radius: 24px
                    icon: mdi:shower
                    name: "[[[ return variables.name ]]]"
                    tap_action:
                      action: navigate
                      navigation_path: "#basement-bathroom"
                      haptic: medium
                    hold_action:
                      action: toggle
                      haptic: medium
                    styles:
                      card:
                        - padding: 8px
                        - height: 130px
                        - border-radius: "[[[ return variables.radius ]]]"
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--yellow)";
                              else return "var(--contrast2)";
                            ]]]
                      grid:
                        - grid-template-areas: "\"n i\""
                        - grid-template-rows: 1fr
                        - grid-template-columns: min-content 1fr
                      icon:
                        - width: 24px
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--contrast20)";
                              else return "var(--contrast20)";
                            ]]]
                      img_cell:
                        - justify-self: end
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--contrast1)";
                              else return "var(--contrast1)";
                            ]]]
                        - border-radius: 100%
                        - align-self: start
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - align-self: start
                        - text-align: left
                        - font-size: 1em
                        - font-weight: 500
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                        - padding: 14px
                  # Garage card
                  - type: custom:button-card
                    entity: switch.garage_lights
                    variables:
                      name: Garage
                      radius: 24px
                    icon: |
                      [[[
                        if (states['cover.ratgdo32_691830_door'].state == "open") return "mdi:garage-open";
                        else return "mdi:garage";
                      ]]]
                    name: "[[[ return variables.name ]]]"
                    tap_action:
                      action: navigate
                      navigation_path: "#garage"
                      haptic: medium
                    hold_action:
                      action: toggle
                      haptic: medium
                    styles:
                      card:
                        - padding: 8px
                        - height: 130px
                        - border-radius: "[[[ return variables.radius ]]]"
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--yellow)";
                              else return "var(--contrast2)";
                            ]]]
                      grid:
                        - grid-template-areas: "\"n i\""
                        - grid-template-rows: 1fr
                        - grid-template-columns: min-content 1fr
                      icon:
                        - width: 24px
                        - color: |
                            [[[
                              if (states['cover.ratgdo32_691830_door'].state == "open") return "var(--black)";
                              else if (entity.state == "on") return "var(--contrast20)";
                              else return "var(--contrast20)";
                            ]]]
                      img_cell:
                        - justify-self: end
                        - background: |
                            [[[
                              if (states['cover.ratgdo32_691830_door'].state == "open") return "var(--red)";
                              else if (entity.state == "on") return "var(--contrast1)";
                              else return "var(--contrast1)";
                            ]]]
                        - border-radius: 100%
                        - align-self: start
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - align-self: start
                        - text-align: left
                        - font-size: 1em
                        - font-weight: 500
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                        - padding: 14px
              # Right column - Page 2
              - type: vertical-stack
                cards:
                  # Basement card
                  - type: custom:button-card
                    entity: light.basement_great_room
                    variables:
                      name: Basement
                      radius: 24px
                    icon: |
                      [[[
                        if (states['media_player.basement'].state == "playing") return "mdi:music";
                        else return "mdi:stairs-down";
                      ]]]
                    name: "[[[ return variables.name ]]]"
                    tap_action:
                      action: navigate
                      navigation_path: "#basement"
                      haptic: medium
                    hold_action:
                      action: toggle
                      haptic: medium
                    state:
                      - value: "on"
                        styles:
                          card:
                            - height: 155px
                          grid:
                            - grid-template-areas: "\"n i\" \"slider slider\""
                            - grid-template-rows: 1fr min-content
                            - grid-template-columns: min-content 1fr
                        custom_fields:
                          slider:
                            card:
                              type: custom:my-slider-v2
                              entity: "[[[ return entity.entity_id ]]]"
                              colorMode: brightness
                              styles:
                                container:
                                  - background: none
                                  - border-radius: 0px
                                  - overflow: visible
                                card:
                                  - height: 25px
                                  - padding: 0px
                                  - background: rgba(var(--contrast1-RGB),var(--color-tint))
                                  - border-radius: 0px
                                  - width: 100%
                                  - position: absolute
                                  - margin-top: "-15px"
                                  - margin-left: "-8px"
                                track:
                                  - overflow: visible
                                  - background: none
                                progress:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "linear-gradient(90deg, rgba(255,255,255, 0.3) 0%, rgba(255,255,255, 1) 100%)";
                                        else return "var(--contrast4)";
                                      ]]]
                                thumb:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "var(--black)";
                                        if (entity.state == "off") return "var(--contrast20)";
                                        else return "var(--contrast8)";
                                      ]]]
                                  - top: 0px
                                  - right: "-6px"
                                  - height: 25px
                                  - width: 3px
                    styles:
                      card:
                        - padding: 8px
                        - height: 130px
                        - border-radius: "[[[ return variables.radius ]]]"
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--yellow)";
                              else return "var(--contrast2)";
                            ]]]
                      grid:
                        - grid-template-areas: "\"n i\""
                        - grid-template-rows: 1fr
                        - grid-template-columns: min-content 1fr
                      icon:
                        - width: 24px
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--contrast20)";
                              else return "var(--contrast20)";
                            ]]]
                      img_cell:
                        - justify-self: end
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--contrast1)";
                              else return "var(--contrast1)";
                            ]]]
                        - border-radius: 100%
                        - align-self: start
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - align-self: start
                        - text-align: left
                        - font-size: 1em
                        - font-weight: 500
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                        - padding: 14px
                  # Laundry Room card
                  - type: custom:button-card
                    entity: switch.laundry_room
                    variables:
                      name: |
                        [[[ return 'Laundry<br>Room']]]
                      radius: 24px
                    icon: |
                      [[[
                        if (states['sensor.washer_current_status'].state == "Running") return "mdi:washing-machine";
                        else if (states['sensor.dryer_current_status'].state == "Running") return "mdi:tumble-dryer";
                        else return "mdi:washing-machine";
                      ]]]
                    name: "[[[ return variables.name ]]]"
                    tap_action:
                      action: navigate
                      navigation_path: "#laundry-room"
                      haptic: medium
                    hold_action:
                      action: toggle
                      haptic: medium
                    styles:
                      card:
                        - padding: 8px
                        - height: 130px
                        - border-radius: "[[[ return variables.radius ]]]"
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--yellow)";
                              else return "var(--contrast2)";
                            ]]]
                      grid:
                        - grid-template-areas: "\"n i\""
                        - grid-template-rows: 1fr
                        - grid-template-columns: min-content 1fr
                      icon:
                        - width: 24px
                        - color: |
                            [[[
                              if (states['sensor.washer_current_status'].state == "Running") return "var(--black)";
                              else if (states['sensor.dryer_current_status'].state == "Running") return "var(--black)";
                              else if (entity.state == "on") return "var(--contrast20)";
                              else return "var(--contrast20)";
                            ]]]
                      img_cell:
                        - justify-self: end
                        - background: |
                            [[[
                              if (states['sensor.washer_current_status'].state == "Running") return "var(--blue)";
                              else if (states['sensor.dryer_current_status'].state == "Running") return "var(--red)";
                              else if (entity.state == "on") return "var(--contrast1)";
                              else return "var(--contrast1)";
                            ]]]
                        - border-radius: 100%
                        - align-self: start
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - align-self: start
                        - text-align: left
                        - font-size: 1em
                        - font-weight: 500
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                        - padding: 14px
                  # Outdoors card
                  - type: custom:button-card
                    entity: light.front_house_lights
                    variables:
                      name: Outdoors
                      radius: 24px
                    icon: mdi:tree-outline
                    name: "[[[ return variables.name ]]]"
                    tap_action:
                      action: navigate
                      navigation_path: "#outdoors"
                      haptic: medium
                    hold_action:
                      action: toggle
                      haptic: medium
                    state:
                      - value: "on"
                        styles:
                          card:
                            - height: 155px
                          grid:
                            - grid-template-areas: "\"n i\" \"slider slider\""
                            - grid-template-rows: 1fr min-content
                            - grid-template-columns: min-content 1fr
                        custom_fields:
                          slider:
                            card:
                              type: custom:my-slider-v2
                              entity: "[[[ return entity.entity_id ]]]"
                              colorMode: brightness
                              styles:
                                container:
                                  - background: none
                                  - border-radius: 0px
                                  - overflow: visible
                                card:
                                  - height: 25px
                                  - padding: 0px
                                  - background: rgba(var(--contrast1-RGB),var(--color-tint))
                                  - border-radius: 0px
                                  - width: 100%
                                  - position: absolute
                                  - margin-top: "-15px"
                                  - margin-left: "-8px"
                                track:
                                  - overflow: visible
                                  - background: none
                                progress:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "linear-gradient(90deg, rgba(255,255,255, 0.3) 0%, rgba(255,255,255, 1) 100%)";
                                        else return "var(--contrast4)";
                                      ]]]
                                thumb:
                                  - background: |
                                      [[[
                                        if (entity.state == "on") return "var(--black)";
                                        if (entity.state == "off") return "var(--contrast20)";
                                        else return "var(--contrast8)";
                                      ]]]
                                  - top: 0px
                                  - right: "-6px"
                                  - height: 25px
                                  - width: 3px
                    styles:
                      card:
                        - padding: 8px
                        - height: 130px
                        - border-radius: "[[[ return variables.radius ]]]"
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--yellow)";
                              else return "var(--contrast2)";
                            ]]]
                      grid:
                        - grid-template-areas: "\"n i\""
                        - grid-template-rows: 1fr
                        - grid-template-columns: min-content 1fr
                      icon:
                        - width: 24px
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--contrast20)";
                              else return "var(--contrast20)";
                            ]]]
                      img_cell:
                        - justify-self: end
                        - background: |
                            [[[
                              if (entity.state == "on") return "var(--contrast1)";
                              else return "var(--contrast1)";
                            ]]]
                        - border-radius: 100%
                        - align-self: start
                        - width: 50px
                        - height: 50px
                      name:
                        - justify-self: start
                        - align-self: start
                        - text-align: left
                        - font-size: 1em
                        - font-weight: 500
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                        - padding: 14px
  - type: grid
    cards:
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Living room
            icon: mdi:sofa-outline
            hash: "#living-room"
            button_type: name
            card_layout: large
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                entity: binary_sensor.living_room_all_occupancy
                icon_color: yellow
                content_info: last-changed
                icon: mdi:motion-sensor
              - type: entity
                entity: binary_sensor.door_sensor_door
                icon_color: red
                icon: mdi:door-closed
            alignment: center
          - type: heading
            icon: mdi:thermostat
            heading: Climate
            heading_style: title
            badges:
              - type: entity
                show_state: true
                show_icon: true
                entity: sensor.living_room_temperature
                color: red
                tap_action:
                  action: more-info
              - type: entity
                show_state: true
                show_icon: true
                entity: sensor.living_room_humidity
                color: blue
                tap_action:
                  action: more-info
          - type: custom:bubble-card
            card_type: climate
            entity: climate.living_room
            sub_button:
              - name: HVAC modes menu
                select_attribute: hvac_modes
                state_background: false
                show_arrow: false
            show_state: true
          - type: heading
            icon: mdi:devices
            heading: Devices
            heading_style: title
            badges:
              - type: entity
                show_state: false
                show_icon: true
                entity: switch.front_camera_detect
                icon: mdi:cctv
                color: red
                tap_action:
                  action: toggle
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:button-card
                entity: media_player.living_room_apple_tv
                template: nav_button
                name: Apple TV
                label: "[[[return states[\"media_player.living_room_apple_tv\"].state]]]"
                variables:
                  navigation_path: home#media
                state:
                  - value: "off"
                    label: "Off"
                    icon: mdi:television-off
                  - value: playing
                    label: Playing
                    icon: mdi:play
                    styles:
                      card:
                        - background-color: var(--green)
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
                      label:
                        - color: var(--black)
                  - value: paused
                    label: Paused
                    icon: mdi:pause
                    styles:
                      card:
                        - background-color: var(--yellow)
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
                      label:
                        - color: var(--black)
                  - value: idle
                    label: Idle
                    icon: mdi:television
                    styles:
                      card:
                        - background-color: var(--blue)
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
                      label:
                        - color: var(--black)
          - square: false
            type: grid
            cards:
              - type: heading
                icon: mdi:lightbulb-group
                heading: Lights
                heading_style: subtitle
                badges:
                  - type: entity
                    show_state: false
                    show_icon: true
                    entity: light.living_room_lights
                    color: yellow
                    tap_action:
                      action: toggle
              - square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:button-card
                    name: Living Room Ceiling Row 1
                    template: light_rgb
                    entity: light.living_room_ceiling_row_1
                  - type: custom:button-card
                    name: Living Room Ceiling Row 2
                    template: light_rgb
                    entity: light.living_room_ceiling_row_2
                  - type: custom:button-card
                    name: Fireplace Ceiling
                    template: light_rgb
                    entity: light.fireplace_ceiling
                  - type: custom:button-card
                    name: Laundry Room
                    entity: light.laundry_room
                    template: light_switch
            columns: 1
          - type: heading
            icon: mdi:music
            heading: Media
            heading_style: title
          - type: custom:swipe-card
            card_width: calc(100% - 48px)
            parameters:
              centeredSlides: true
              slidesPerView: auto
              spaceBetween: 16
              initialSlide: 0
            cards:
              - type: conditional
                conditions:
                  - entity: media_player.living_room
                    state_not: standby
                  - entity: media_player.living_room
                    state_not: "off"
                card:
                  type: custom:button-card
                  entity: media_player.living_room
                  template: custom_card_mediaplayer_music
              - type: conditional
                conditions:
                  - entity: media_player.living_room_apple_tv
                    state_not: idle
                  - entity: media_player.living_room_apple_tv
                    state_not: "off"
                card:
                  type: custom:button-card
                  entity: media_player.living_room_apple_tv
                  template: custom_card_mediaplayer_tv
              - type: conditional
                conditions:
                  - entity: switch.front_camera_detect
                    state: "on"
                card:
                  show_state: false
                  show_name: false
                  camera_view: live
                  type: picture-entity
                  camera_image: camera.front_camera
                  entity: camera.front_camera
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Master Bedroom
            icon: mdi:bed-king-outline
            hash: "#master-bedroom"
            button_type: name
            sub_button: []
          - type: heading
            icon: mdi:devices
            heading: Devices
            heading_style: title
            badges: []
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                entity: fan.dyson_fan
                name: Dyson Fan
                template: switch_template
                variables:
                  icon_on: mdi:fan
                  icon_off: mdi:fan-off
                  color: var(--blue)
            columns: 1
          - square: false
            type: grid
            cards:
              - type: heading
                icon: mdi:lightbulb-group
                heading: Lights
                heading_style: subtitle
                badges:
                  - type: entity
                    show_state: false
                    show_icon: true
                    entity: light.master_bedroom_rear
                    color: yellow
                    tap_action:
                      action: toggle
              - square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:button-card
                    name: Master Bedroom Rear
                    entity: light.master_bedroom_rear
                    template: light_rgb
                  - type: custom:button-card
                    name: Master Bedroom Front
                    entity: light.master_bedroom_front
                    template: light_rgb
                  - type: custom:button-card
                    name: David's Bed Light
                    entity: light.davids_bed_light
                    template: light_switch
                  - type: custom:button-card
                    name: Ola's Bed Lamp
                    entity: light.ola_bed_lamp
                    template: light_switch
            columns: 1
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Master Bathroom
            icon: mdi:shower
            hash: "#master-bathroom"
            button_type: name
            sub_button: []
          - type: heading
            icon: mdi:thermostat
            heading: Climate
            heading_style: title
            badges:
              - type: entity
                show_state: true
                show_icon: true
                entity: sensor.floor_thermostat_temperature
                color: red
                tap_action:
                  action: more-info
          - type: custom:bubble-card
            card_type: climate
            entity: climate.floor_thermostat
            sub_button:
              - name: HVAC modes menu
                select_attribute: hvac_modes
                state_background: false
                show_arrow: false
            show_state: true
          - square: false
            type: grid
            cards:
              - type: heading
                icon: mdi:lightbulb-group
                heading: Lights
                heading_style: subtitle
                badges:
                  - type: entity
                    show_state: false
                    show_icon: true
                    entity: light.master_bathroom_vanity
                    color: yellow
                    tap_action:
                      action: toggle
              - square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:button-card
                    name: Master Bathroom Vanity
                    entity: light.master_bathroom_vanity
                    template: light_rgb
                  - type: custom:button-card
                    name: Master Bathroom Ceiling
                    entity: light.master_bathroom_ceiling
                    template: light_rgb
                  - type: custom:button-card
                    name: Master Bathroom Fan
                    entity: fan.master_bathroom_fan
                    template: switch_template
                    variables:
                      icon_on: mdi:fan
                      icon_off: mdi:fan-off
                      color: var(--blue)
            columns: 1
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Office
            icon: mdi:monitor
            hash: "#office"
            button_type: name
            sub_button: []
          - square: false
            type: grid
            cards:
              - type: heading
                icon: mdi:lightbulb-group
                heading: Lights
                heading_style: subtitle
                badges:
                  - type: entity
                    show_state: false
                    show_icon: true
                    entity: light.office_ceiling_main
                    color: yellow
                    tap_action:
                      action: toggle
              - square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:button-card
                    name: Office Ceiling Main
                    entity: light.office_ceiling_main
                    template: light_rgb
                  - type: custom:button-card
                    name: Office Ceiling Side
                    entity: light.office_ceiling_side
                    template: light_rgb
                  - type: custom:button-card
                    name: Office Lamp
                    entity: light.office_lamp
                    template: light_rgb
                  - type: custom:button-card
                    name: Desk Lamp
                    entity: light.desk_lamp
                    template: light_rgb
                  - type: custom:button-card
                    name: Office Rear Lights
                    entity: light.tp_link_smart_dimmer_38c5
                    template: light_rgb
            columns: 1
          - type: heading
            icon: mdi:music
            heading: Media
            heading_style: title
          - type: custom:swipe-card
            card_width: calc(100% - 48px)
            parameters:
              centeredSlides: true
              slidesPerView: auto
              spaceBetween: 16
              initialSlide: 0
            cards:
              - type: conditional
                conditions:
                  - entity: media_player.office
                    state_not: standby
                  - entity: media_player.office
                    state_not: "off"
                card:
                  type: custom:button-card
                  entity: media_player.office
                  template: custom_card_mediaplayer_music
          - type: conditional
            conditions:
              - entity: sensor.cnlbp622c_623c
                state_not: unavailable
            card:
              square: false
              columns: 3
              type: grid
              cards:
                - type: custom:button-card
                  entity: sensor.cnlbp622c_623c
                  name: Canon Printer
                  icon: mdi:printer
                  template: custom_card_sensor_big
                  variables:
                    icon_on: mdi:printer
                    icon_off: mdi:printer
                    state_off: idle
                    state_on: printing
                    background_color_on: var(--green)
                    background_color_off: var(--contrast2)
                    color_on: var(--black)
                    color_off: var(--contrast20)
                    state: |
                      [[[ 
                        if (entity.state == "printing") return `<span style="font-size:1em;">Printing</span>`;
                        else return `<span style="font-size:1em;">Idle</span>`;
                      ]]]
                  styles:
                    card:
                      - height: 168px
                - square: false
                  columns: 1
                  type: grid
                  cards:
                    - type: custom:button-card
                      entity: sensor.cnlbp622c_623c_canon_cartridge_054_cyan_toner
                      label: >-
                        [[[return
                        states["sensor.cnlbp622c_623c_canon_cartridge_054_cyan_toner"].state]]]
                      name: Cyan Toner
                      template: button_template
                      variables:
                        icon2: mdi:format-color-fill
                        background_color_off: var(--blue)
                        background_color_on: var(--blue)
                        color_on: var(--black)
                        color_off: var(--black)
                    - type: custom:button-card
                      entity: sensor.cnlbp622c_623c_canon_cartridge_054_yellow_ton
                      label: >-
                        [[[return
                        states["sensor.cnlbp622c_623c_canon_cartridge_054_yellow_ton"].state]]]
                      name: Yellow Toner
                      template: button_template
                      variables:
                        icon2: mdi:format-color-fill
                        background_color_off: var(--yellow)
                        background_color_on: var(--yellow)
                        color_on: var(--black)
                        color_off: var(--black)
                - square: false
                  columns: 1
                  type: grid
                  cards:
                    - type: custom:button-card
                      entity: sensor.cnlbp622c_623c_canon_cartridge_054_magenta_to
                      label: >-
                        [[[return
                        states["sensor.cnlbp622c_623c_canon_cartridge_054_magenta_to"].state]]]
                      name: Magenta Toner
                      template: button_template
                      variables:
                        icon2: mdi:format-color-fill
                        background_color_off: var(--purple)
                        background_color_on: var(--purple)
                        color_on: var(--black)
                        color_off: var(--black)
                    - type: custom:button-card
                      entity: sensor.cnlbp622c_623c_canon_cartridge_054_black_toner
                      label: >-
                        [[[return
                        states["sensor.cnlbp622c_623c_canon_cartridge_054_black_toner"].state]]]
                      name: Black Toner
                      template: button_template
                      variables:
                        icon2: mdi:format-color-fill
                        background_color_off: var(--contrast2)
                        background_color_on: var(--contrast2)
                        color_on: var(--contrast20)
                        color_off: var(--contrast20)
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Kitchen
            icon: mdi:silverware-variant
            hash: "#kitchen"
            button_type: name
            sub_button: []
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                entity: binary_sensor.door_sensor_door_2
                icon_color: red
                content_info: last-changed
                icon: mdi:door-closed
            alignment: center
          - type: heading
            icon: mdi:devices
            heading: Devices
            heading_style: title
            badges: []
          - square: false
            columns: 1
            type: grid
            cards:
              - type: custom:button-card
                entity: vacuum.p10_pro_ultra
                name: Vacuum
                template: nav_button_state_small
                variables:
                  navigation_path: home#vacuum
                  state_off: docked
                  state_on: cleaning
                  icon_on: mdi:robot-vacuum
                  icon_off: mdi:robot-vacuum-off
                  background_color_on: var(--green)
                  background_color_off: var(--contrast2)
                  color_off: var(--contrast20)
          - square: false
            type: grid
            cards:
              - type: heading
                icon: mdi:lightbulb-group
                heading: Lights
                heading_style: subtitle
                badges:
                  - type: entity
                    show_state: false
                    show_icon: true
                    entity: light.kitchen
                    color: yellow
                    tap_action:
                      action: toggle
              - square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:button-card
                    name: Kitchen Ceiling
                    template: light_rgb
                    entity: light.kitchen
                  - type: custom:button-card
                    name: Under Cabinet Lights
                    entity: light.under_cabinet_lights
                    template: light_rgb
                  - type: custom:button-card
                    name: Kitchen Sink
                    entity: light.kitchen_sink
                    template: light_switch
                  - type: custom:button-card
                    name: Breakfast Corner
                    entity: light.breakfast_corner
                    template: light_rgb
            columns: 1
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: East & West Bedrooms
            icon: mdi:bed-outline
            hash: "#east-west-bedrooms"
            button_type: name
            sub_button: []
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                entity: binary_sensor.guest_room_motion_sensor
                icon_color: yellow
                content_info: last-changed
                icon: mdi:motion-sensor
              - type: entity
                entity: binary_sensor.guest_room_window_door_sensor
                icon_color: red
                icon: mdi:window-closed-variant
            alignment: center
          - type: heading
            icon: mdi:thermostat
            heading: Climate
            heading_style: title
            badges:
              - type: entity
                show_state: true
                show_icon: true
                entity: sensor.guest_room_temperature
                color: red
                tap_action:
                  action: more-info
              - type: entity
                show_state: true
                show_icon: true
                entity: sensor.guest_room_humidity
                color: blue
                tap_action:
                  action: more-info
          - type: custom:bubble-card
            card_type: climate
            entity: climate.guest_room
            sub_button:
              - name: HVAC modes menu
                select_attribute: hvac_modes
                state_background: false
                show_arrow: false
            show_state: true
          - type: heading
            icon: mdi:devices
            heading: Devices
            heading_style: title
            badges:
              - type: entity
                show_state: false
                show_icon: true
                entity: input_boolean.guest_room_occupancy
                icon: mdi:light-switch
                color: red
                tap_action:
                  action: toggle
              - type: entity
                show_state: false
                show_icon: true
                entity: input_boolean.guest_night_mode
                color: blue
                tap_action:
                  action: toggle
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                entity: sensor.prusa_mini
                name: Prusa Mini+
                label: |
                  [[[
                    if (entity.state == "unknown") return "Off";
                    else return states["sensor.prusa_mini"].state;
                  ]]]
                template: nav_button_small
                variables:
                  navigation_path: server#3d-printer
                  state_off: unknown
                  state_on: printing
                  icon_on: mdi:printer-3d
                  icon_off: mdi:printer-3d-off
                  background_color_on: var(--purple)
                  background_color_off: var(--contrast2)
                  color_on: var(--black)
                  color_off: var(--contrast20)
            columns: 2
          - square: false
            type: grid
            cards:
              - type: heading
                icon: mdi:lightbulb-group
                heading: Lights
                heading_style: subtitle
                badges:
                  - type: entity
                    show_state: false
                    show_icon: true
                    entity: light.guest_room_lights
                    color: yellow
                    tap_action:
                      action: toggle
                  - type: entity
                    entity: switch.adaptive_lighting_guest_room
                    show_state: false
                    show_icon: true
                    color: orange
                    tap_action:
                      action: toggle
                  - type: entity
                    entity: switch.adaptive_lighting_adapt_color_guest_room
                    show_state: false
                    show_icon: true
                    color: pink
                    tap_action:
                      action: toggle
                  - type: entity
                    entity: switch.adaptive_lighting_adapt_brightness_guest_room
                    show_state: false
                    show_icon: true
                    color: yellow
                    tap_action:
                      action: toggle
                  - type: entity
                    entity: switch.adaptive_lighting_sleep_mode_guest_room
                    show_state: false
                    show_icon: true
                    color: blue
                    tap_action:
                      action: toggle
              - square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:button-card
                    name: Top Light
                    entity: light.guest_room_light
                    template: light_rgb
                  - type: custom:button-card
                    name: Desk Lamp
                    entity: light.guest_room_desk_lamp
                    template: light_switch
            columns: 1
          - type: heading
            icon: mdi:music
            heading: Media
            heading_style: title
          - type: custom:swipe-card
            card_width: calc(100% - 48px)
            parameters:
              centeredSlides: true
              slidesPerView: auto
              spaceBetween: 16
              initialSlide: 0
            cards:
              - type: conditional
                conditions:
                  - entity: media_player.guest_room
                    state_not: standby
                  - entity: media_player.guest_room
                    state_not: "off"
                card:
                  type: custom:button-card
                  entity: media_player.guest_room
                  template: custom_card_mediaplayer_music
              - type: conditional
                conditions:
                  - entity: sensor.guest_room_next_timer
                    state_not: unknown
                  - entity: sensor.guest_room_next_timer
                    state_not: unavailable
                card:
                  type: custom:button-card
                  entity: sensor.guest_room_next_timer
                  name: Guest Room Timer
                  icon: mdi:timer-outline
                  show_name: true
                  show_icon: true
                  show_label: false
                  show_state: false
                  tap_action:
                    action: more-info
                  hold_action:
                    action: more-info
                  custom_fields:
                    bar: |
                      [[[
                        var color = "var(--green)";
                        var state = 100 - states['sensor.guest_room_timer'].attributes.remaining_perc;
                        if (state < 10) color = "var(--red)";
                        else if (state < 50) color = "var(--yellow)";
                        else if (state < 90) color = "var(--orange)";
                        return `
                        <div>
                        <div style="background:${color}; height: 12px; width:${state}%">
                        </div>
                        </div>`
                      ]]]
                    rem:
                      card:
                        type: conditional
                        conditions:
                          - condition: state
                            entity: sensor.guest_room_next_timer
                            state_not: unknown
                        card:
                          type: custom:button-card
                          entity: sensor.guest_room_timer
                          name: >
                            [[[

                            var remainingTime =
                            states['sensor.guest_room_timer'].attributes.remaining;

                            return `${remainingTime}`;

                            ]]]
                          show_icon: false
                          styles:
                            card:
                              - width: min
                              - background: none
                              - overflow: visible
                            name:
                              - font-size: 14px
                              - margin-top: 6px
                              - font-weight: 600
                              - color: var(--contrast20)
                    icon1: |
                      [[[
                        return '<ha-icon icon="mdi:desk"></ha-icon>';
                      ]]]
                  styles:
                    grid:
                      - grid-template-areas: "\"rem icon1\" \"n icon2\" \"bar bar\""
                      - grid-template-rows: 24px 1fr 24px min-content min-content min-content
                      - grid-template-columns: 60% 40%
                    card:
                      - height: 100%
                      - padding: 1rem
                      - background: var(--contrast2)
                    img_cell:
                      - position: absolute
                      - top: 20%
                      - left: 40%
                      - overflow: visible
                    icon:
                      - position: absolute
                      - width: 20em
                      - opacity: 20%
                      - color: var(--contrast20)
                      - transform: rotate(-20deg)
                    label:
                      - text-align: left
                      - font-size: 18px
                      - font-weight: 500
                      - justify-self: start
                      - align-self: end
                      - overflow: visible
                      - color: var(--contrast20)
                    name:
                      - text-align: left
                      - font-size: 12px
                      - justify-self: start
                      - align-self: center
                      - overflow: visible
                      - color: var(--contrast20)
                    custom_fields:
                      bar:
                        - justify-self: start
                        - width: 100%
                        - height: |
                            [[[
                              if (entity.state != 'unknown') {
                                return '12px';
                              } else {
                                return '0px';
                              }
                            ]]]
                        - background: var(--contrast1)
                        - border-radius: 24px
                      rem:
                        - justify-self: start
                        - font-size: 14px
                        - font-weight: 600
                        - align-self: end
                        - height: |
                            [[[
                              if (entity.state != 'unknown') {
                                return '27px';
                              } else {
                                return '0px';
                              }
                            ]]]
                      icon1:
                        - justify-self: end
                        - width: 24px
                        - color: var(--contrast20)
                    hold_action:
                      action: more-info
      # First Floor Bathroom popup
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: First Floor Bathroom
            icon: mdi:shower
            hash: "#first-floor-bathroom"
            button_type: name
            sub_button: []
          - type: heading
            icon: mdi:thermostat
            heading: Climate
            heading_style: title
            badges:
              - type: entity
                show_state: true
                show_icon: true
                entity: sensor.floor_thermostat_temperature_2
                color: red
                tap_action:
                  action: more-info
          - type: custom:bubble-card
            card_type: climate
            entity: climate.floor_thermostat_2
            sub_button:
              - name: HVAC modes menu
                select_attribute: hvac_modes
                state_background: false
                show_arrow: false
            show_state: true
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: title
            badges:
              - type: entity
                show_state: false
                show_icon: true
                entity: light.first_floor_bathroom_vanity
                color: yellow
                tap_action:
                  action: toggle
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:button-card
                name: Vanity
                template: light_rgb
                entity: light.first_floor_bathroom_vanity
              - type: custom:button-card
                name: Ceiling
                template: light_rgb
                entity: light.first_floor_bathroom_ceiling
          - type: heading
            icon: mdi:fan
            heading: Fan
            heading_style: title
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:button-card
                entity: switch.first_floor_bathroom_fan
                name: Exhaust Fan
                template: button_template
                variables:
                  state_on: "on"
                  state_off: "off"
      # Basement popup
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Basement
            icon: mdi:stairs-down
            hash: "#basement"
            button_type: name
            sub_button: []
          - type: heading
            icon: mdi:thermostat
            heading: Climate
            heading_style: title
            badges:
              - type: entity
                show_state: true
                show_icon: true
                entity: sensor.thermometer_hygrometer_temperature
                color: red
                tap_action:
                  action: more-info
              - type: entity
                show_state: true
                show_icon: true
                entity: sensor.thermometer_hygrometer_humidity
                color: blue
                tap_action:
                  action: more-info
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: title
            badges:
              - type: entity
                show_state: false
                show_icon: true
                entity: light.basement_great_room
                color: yellow
                tap_action:
                  action: toggle
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:button-card
                name: Great Room
                template: light_rgb
                entity: light.basement_great_room
              - type: custom:button-card
                name: Play Area
                template: light_rgb
                entity: light.basement_play_area
              - type: custom:button-card
                name: Bar
                template: light_rgb
                entity: light.bar_lights
              - type: custom:button-card
                name: Landing
                template: light_rgb
                entity: light.basement_landing
          - type: heading
            icon: mdi:music
            heading: Media
            heading_style: title
          - type: conditional
            conditions:
              - entity: media_player.basement
                state_not: "off"
            card:
              type: custom:button-card
              entity: media_player.basement
              template: custom_card_mediaplayer_music
      # Basement Bathroom popup
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Basement Bathroom
            icon: mdi:shower
            hash: "#basement-bathroom"
            button_type: name
            sub_button: []
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: title
            badges:
              - type: entity
                show_state: false
                show_icon: true
                entity: switch.basement_bathroom_vanity
                color: yellow
                tap_action:
                  action: toggle
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:button-card
                entity: switch.basement_bathroom_vanity
                name: Vanity
                template: button_template
                variables:
                  state_on: "on"
                  state_off: "off"
              - type: custom:button-card
                name: Ceiling
                template: light_rgb
                entity: light.tp_link_smart_dimmer_4b11
          - type: heading
            icon: mdi:fan
            heading: Fan
            heading_style: title
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:button-card
                entity: switch.basement_bathroom_fan
                name: Exhaust Fan
                template: button_template
                variables:
                  state_on: "on"
                  state_off: "off"
      # Laundry Room popup
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Laundry Room
            icon: mdi:washing-machine
            hash: "#laundry-room"
            button_type: name
            sub_button: []
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: title
            badges:
              - type: entity
                show_state: false
                show_icon: true
                entity: switch.laundry_room
                color: yellow
                tap_action:
                  action: toggle
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:button-card
                entity: switch.laundry_room
                name: Laundry Light
                template: button_template
                variables:
                  state_on: "on"
                  state_off: "off"
          - type: heading
            icon: mdi:washing-machine
            heading: Appliances
            heading_style: title
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:button-card
                entity: sensor.washer_current_status
                name: Washer
                label: |
                  [[[
                    var status = states['sensor.washer_current_status'].state;
                    var remaining = states['sensor.washer_remaining_time'].state;
                    if (status == "Running") return remaining + " left";
                    else return status;
                  ]]]
                template: nav_button_small
                variables:
                  state_on: Running
                  state_off: Standby
                  icon_on: mdi:washing-machine
                  icon_off: mdi:washing-machine-off
                  background_color_on: var(--blue)
                  background_color_off: var(--contrast2)
                  color_on: var(--black)
                  color_off: var(--contrast20)
              - type: custom:button-card
                entity: sensor.dryer_current_status
                name: Dryer
                label: |
                  [[[
                    var status = states['sensor.dryer_current_status'].state;
                    var remaining = states['sensor.dryer_remaining_time'].state;
                    if (status == "Running") return remaining + " left";
                    else return status;
                  ]]]
                template: nav_button_small
                variables:
                  state_on: Running
                  state_off: Standby
                  icon_on: mdi:tumble-dryer
                  icon_off: mdi:tumble-dryer-off
                  background_color_on: var(--red)
                  background_color_off: var(--contrast2)
                  color_on: var(--black)
                  color_off: var(--contrast20)
      # Garage popup
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Garage
            icon: mdi:garage
            hash: "#garage"
            button_type: name
            sub_button: []
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                entity: binary_sensor.ratgdo32_691830_motion
                icon_color: yellow
                content_info: last-changed
                icon: mdi:motion-sensor
              - type: entity
                entity: binary_sensor.ratgdo32_691830_obstruction
                icon_color: red
                icon: mdi:alert
              - type: entity
                entity: binary_sensor.ratgdo32_691830_motor
                icon_color: blue
                icon: mdi:cog
              - type: entity
                entity: binary_sensor.ratgdo32_691830_button
                icon_color: green
                icon: mdi:gesture-tap-button
              - type: entity
                entity: sensor.ratgdo32_691830_paired_devices
                icon_color: purple
                icon: mdi:remote
            alignment: center
          - type: heading
            icon: mdi:garage
            heading: Garage Door
            heading_style: title
            badges:
              - type: entity
                entity: cover.ratgdo32_691830_door
                show_state: true
                show_icon: true
          - type: custom:bubble-card
            card_type: cover
            entity: cover.ratgdo32_691830_door
            name: Garage Door
            show_state: true
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: title
            badges:
              - type: entity
                show_state: false
                show_icon: true
                entity: switch.garage_lights
                color: yellow
                tap_action:
                  action: toggle
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:button-card
                entity: switch.garage_lights
                name: Garage Lights
                template: button_template
                variables:
                  state_on: "on"
                  state_off: "off"
              - type: custom:button-card
                entity: light.ratgdo32_691830_light
                name: Door Light
                template: light_switch
          - type: heading
            icon: mdi:lock
            heading: Locks
            heading_style: title
          - square: false
            columns: 2
            type: grid
            cards:
              - type: tile
                entity: lock.level_bolt_matter_2
                name: Side Garage Door
              - type: tile
                entity: lock.ratgdo32_691830_lock_remotes
                name: Lock Remotes
      # Outdoors popup
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Outdoors
            icon: mdi:tree-outline
            hash: "#outdoors"
            button_type: name
            sub_button: []
          - type: heading
            icon: mdi:lightbulb-group
            heading: Lights
            heading_style: title
            badges:
              - type: entity
                show_state: false
                show_icon: true
                entity: light.front_house_lights
                color: yellow
                tap_action:
                  action: toggle
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:button-card
                name: Front House
                template: light_rgb
                entity: light.front_house_lights
              - type: custom:button-card
                name: Driveway
                template: light_rgb
                entity: light.driveway_lights
              - type: custom:button-card
                name: Rear Lights
                template: light_rgb
                entity: light.outdoor_rear_lights
              - type: custom:button-card
                name: House Number
                template: light_rgb
                entity: light.house_number_sign
              - type: custom:button-card
                name: Patio
                template: light_rgb
                entity: light.tapo_smart_dimmer
              - type: custom:button-card
                name: Garage Driveway
                template: light_rgb
                entity: light.garage_driveway_lights
          - type: heading
            icon: mdi:water
            heading: Irrigation
            heading_style: title
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:button-card
                entity: switch.front
                name: Front Yard
                template: button_template
                variables:
                  state_on: "on"
                  state_off: "off"
                  background_color_on: var(--blue)
              - type: custom:button-card
                entity: switch.back
                name: Backyard
                template: button_template
                variables:
                  state_on: "on"
                  state_off: "off"
                  background_color_on: var(--blue)
          - type: heading
            icon: mdi:cctv
            heading: Cameras
            heading_style: title
          - type: custom:swipe-card
            card_width: calc(100% - 48px)
            parameters:
              centeredSlides: true
              slidesPerView: auto
              spaceBetween: 16
              initialSlide: 0
            cards:
              - type: picture-entity
                entity: camera.front_camera
                camera_view: live
                show_state: false
                show_name: true
              - type: picture-entity
                entity: camera.doorbell
                camera_view: live
                show_state: false
                show_name: true
              - type: picture-entity
                entity: camera.driveway
                camera_view: live
                show_state: false
                show_name: true
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Corridor
            icon: mdi:door
            hash: "#corridor"
            button_type: name
            sub_button: []
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                entity: binary_sensor.hue_motion_sensor_1_motion
                icon_color: yellow
                content_info: last-changed
                icon: mdi:motion-sensor
              - type: entity
                entity: sensor.hue_motion_sensor_1_light_level
                icon_color: yellow
                icon: mdi:brightness-5
            alignment: center
          - type: heading
            icon: mdi:devices
            heading: Devices
            heading_style: title
            badges:
              - type: entity
                show_state: false
                show_icon: true
                entity: switch.camera_corridor_outlet
                icon: mdi:cctv
                color: red
                tap_action:
                  action: toggle
          # MISSING ENTITIES: lock.flat_door, lock.front_door - See missing_entities.md
          # Your actual locks are: lock.front_door_bolt, lock.level_bolt_matter, lock.level_bolt_matter_2
          # - square: false
          #   columns: 2
          #   type: grid
          #   cards:
          #     - type: custom:button-card
          #       entity: lock.flat_door
          #       icon: mdi:lock-open
          #       label: "[[[return states[\"lock.flat_door\"].state]]]"
          #       template: button_template
          #       variables:
          #         icon2: |
          #           [[[
          #             if (entity.state == "locked") return "mdi:lock";
          #             else return "mdi:lock-open-variant";
          #           ]]]
          #         state_on: unlocked
          #         state_off: locked
          #         background_color_off: var(--green)
          #         background_color_on: var(--red)
          #         color_on: var(--contrast1)
          #         color_off: var(--contrast1)
          #     - type: custom:button-card
          #       entity: lock.front_door
          #       icon: mdi:lock-open
          #       label: "[[[return states[\"lock.front_door\"].state]]]"
          #       template: button_template
          #       variables:
          #         icon2: |
          #           [[[
          #             if (entity.state == "locked") return "mdi:lock";
          #             else return "mdi:lock-open-variant";
          #           ]]]
          #         state_on: unlocked
          #         state_off: locked
          #         background_color_off: var(--green)
          #         background_color_on: var(--red)
          #         color_on: var(--contrast1)
          #         color_off: var(--contrast1)
          - square: false
            type: grid
            cards:
              - type: heading
                icon: mdi:lightbulb-group
                heading: Lights
                heading_style: subtitle
                badges:
                  - type: entity
                    show_state: false
                    show_icon: true
                    entity: light.corridor_lights
                    color: yellow
                    tap_action:
                      action: toggle
                  - type: entity
                    entity: switch.adaptive_lighting_corridor
                    show_icon: true
                    show_state: false
                    color: orange
                    tap_action:
                      action: toggle
                  - type: entity
                    entity: switch.adaptive_lighting_adapt_color_corridor
                    show_state: false
                    show_icon: true
                    color: pink
                    tap_action:
                      action: toggle
                  - type: entity
                    entity: switch.adaptive_lighting_adapt_brightness_corridor
                    show_state: false
                    show_icon: true
                    color: yellow
                    tap_action:
                      action: toggle
                  - type: entity
                    entity: switch.adaptive_lighting_sleep_mode_corridor
                    show_state: false
                    show_icon: true
                    color: blue
                    tap_action:
                      action: toggle
              - square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:button-card
                    name: Spot 1
                    entity: light.corridor_spot_1
                    template: light_rgb
                  - type: custom:button-card
                    name: Spot 2
                    entity: light.corridor_spot_2
                    template: light_rgb
                  - type: custom:button-card
                    name: Spot 3
                    entity: light.corridor_spot_3
                    template: light_rgb
            columns: 1
          - type: heading
            icon: mdi:music
            heading: Media
            heading_style: title
          - type: conditional
            conditions:
              - condition: state
                entity: media_player.nest_party
                state_not: "off"
              - condition: or
                conditions:
                  - condition: state
                    entity: media_player.houseparty
                    state_not: standby
                  - condition: state
                    entity: media_player.nest_party
                    state_not: "off"
                  - condition: state
                    entity: switch.camera_corridor_outlet
                    state: "on"
            card:
              type: custom:swipe-card
              card_width: calc(100% - 48px)
              parameters:
                centeredSlides: true
                slidesPerView: auto
                spaceBetween: 16
                initialSlide: 0
              cards:
                - type: conditional
                  conditions:
                    - entity: media_player.nest_party
                      state_not: "off"
                  card:
                    type: custom:button-card
                    entity: media_player.nest_party
                    template: custom_card_mediaplayer_music
                - type: conditional
                  conditions:
                    - entity: switch.camera_corridor_outlet
                      state: "on"
                  card:
                    show_state: false
                    show_name: false
                    camera_view: live
                    type: picture-entity
                    camera_image: camera.192_168_178_78
                    entity: camera.192_168_178_78
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Lights
            icon: mdi:lightbulb-group
            hash: "#lights"
            button_type: name
          - type: heading
            icon: mdi:cog
            heading: Settings
            heading_style: title
            badges:
              - type: entity
                show_state: false
                show_icon: true
                entity: light.living_room_lights
                color: yellow
                tap_action:
                  action: toggle
          - type: heading
            icon: mdi:lightbulb-group
            heading: All Lights
            heading_style: title
          - square: false
            type: grid
            cards:
              - type: heading
                icon: mdi:sofa-outline
                heading: Living Room
                heading_style: subtitle
                badges:
                  - type: entity
                    show_state: false
                    show_icon: true
                    entity: light.living_room_lights
                    color: yellow
                    tap_action:
                      action: toggle
                tap_action:
                  action: navigate
                  navigation_path: living-room
              - square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:button-card
                    name: Living Room Ceiling Row 1
                    template: light_rgb
                    entity: light.living_room_ceiling_row_1
                  - type: custom:button-card
                    name: Living Room Ceiling Row 2
                    template: light_rgb
                    entity: light.living_room_ceiling_row_2
                  - type: custom:button-card
                    name: Fireplace Ceiling
                    entity: light.fireplace_ceiling
                    template: light_rgb
                  - type: custom:button-card
                    name: Laundry Room
                    entity: light.laundry_room
                    template: light_switch
                  - type: custom:button-card
                    name: Dining Room Ceiling
                    template: light_rgb
                    entity: light.dining_room_ceiling
                  - type: custom:button-card
                    name: Staircase
                    template: light_rgb
                    entity: light.staircase
            columns: 1
          - square: false
            type: grid
            cards:
              - type: heading
                icon: mdi:bed-king
                heading: Master Bedroom
                heading_style: subtitle
                badges:
                  - type: entity
                    show_state: false
                    show_icon: true
                    entity: light.master_bedroom_rear
                    color: yellow
                    tap_action:
                      action: toggle
                tap_action:
                  action: navigate
                  navigation_path: bedroom
              - square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:button-card
                    name: Master Bedroom Rear
                    entity: light.master_bedroom_rear
                    template: light_rgb
                  - type: custom:button-card
                    name: Master Bedroom Front
                    entity: light.master_bedroom_front
                    template: light_rgb
                  - type: custom:button-card
                    name: David's Bed Light
                    entity: light.davids_bed_light
                    template: light_switch
                  - type: custom:button-card
                    name: Ola's Bed Lamp
                    entity: light.ola_bed_lamp
                    template: light_switch
                  - type: custom:button-card
                    name: West Bedroom
                    template: light_rgb
                    entity: light.west_bedroom
            columns: 1
          - square: false
            type: grid
            cards:
              - type: heading
                icon: mdi:monitor
                heading: Office
                heading_style: subtitle
                badges:
                  - type: entity
                    show_state: false
                    show_icon: true
                    entity: light.office_ceiling_main
                    color: yellow
                    tap_action:
                      action: toggle
                tap_action:
                  action: navigate
                  navigation_path: office
              - square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:button-card
                    name: Office Ceiling Main
                    template: light_rgb
                    entity: light.office_ceiling_main
                  - type: custom:button-card
                    name: Office Ceiling Side
                    template: light_rgb
                    entity: light.office_ceiling_side
                  - type: custom:button-card
                    name: Office Lamp
                    entity: light.office_lamp
                    template: light_rgb
                  - type: custom:button-card
                    name: Desk Lamp
                    entity: light.desk_lamp
                    template: light_rgb
                  - type: custom:button-card
                    name: Office Rear Lights
                    entity: light.tp_link_smart_dimmer_38c5
                    template: light_rgb
            columns: 1
          - square: false
            type: grid
            cards:
              - type: heading
                icon: mdi:silverware-variant
                heading: Kitchen
                heading_style: subtitle
                badges:
                  - type: entity
                    show_state: false
                    show_icon: true
                    entity: light.kitchen
                    color: yellow
                    tap_action:
                      action: toggle
                tap_action:
                  action: navigate
                  navigation_path: kitchen
              - square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:button-card
                    name: Kitchen Ceiling
                    template: light_rgb
                    entity: light.kitchen
                  - type: custom:button-card
                    name: Under Cabinet Lights
                    entity: light.under_cabinet_lights
                    template: light_rgb
                  - type: custom:button-card
                    name: Kitchen Sink
                    entity: light.kitchen_sink
                    template: light_switch
                  - type: custom:button-card
                    name: Breakfast Corner
                    entity: light.breakfast_corner
                    template: light_rgb
            columns: 1
          - square: false
            type: grid
            cards:
              - type: heading
                icon: mdi:shower
                heading: Master Bathroom
                heading_style: subtitle
                badges:
                  - type: entity
                    show_state: false
                    show_icon: true
                    entity: light.master_bathroom_vanity
                    color: yellow
                    tap_action:
                      action: toggle
                tap_action:
                  action: navigate
                  navigation_path: master-bathroom
              - square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:button-card
                    name: Master Bathroom Vanity
                    entity: light.master_bathroom_vanity
                    template: light_rgb
                  - type: custom:button-card
                    name: Master Bathroom Ceiling
                    entity: light.master_bathroom_ceiling
                    template: light_rgb
            columns: 1
          - square: false
            type: grid
            cards:
              - type: heading
                icon: mdi:bathtub
                heading: First Floor Bathroom
                heading_style: subtitle
                badges:
                  - type: entity
                    show_state: false
                    show_icon: true
                    entity: light.first_floor_bathroom_vanity
                    color: yellow
                    tap_action:
                      action: toggle
                tap_action:
                  action: navigate
                  navigation_path: first-floor-bathroom
              - square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:button-card
                    name: First Floor Bathroom Vanity
                    entity: light.first_floor_bathroom_vanity
                    template: light_rgb
                  - type: custom:button-card
                    name: First Floor Bathroom Ceiling
                    entity: light.first_floor_bathroom_ceiling
                    template: light_rgb
            columns: 1
          - square: false
            type: grid
            cards:
              - type: heading
                icon: mdi:stairs
                heading: Hallway
                heading_style: subtitle
                badges:
                  - type: entity
                    show_state: false
                    show_icon: true
                    entity: light.hallway
                    color: yellow
                    tap_action:
                      action: toggle
                tap_action:
                  action: navigate
                  navigation_path: hallway
              - square: false
                columns: 1
                type: grid
                cards:
                  - type: custom:button-card
                    name: Hallway
                    entity: light.hallway
                    template: light_rgb
            columns: 1
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Chores
            icon: mdi:list-box-outline
            hash: "#chores"
            button_type: name
          - type: conditional
            conditions:
              - condition: state
                entity: group.chores
                state: "on"
            card:
              type: vertical-stack
              cards:
                - type: custom:bubble-card
                  card_type: separator
                  name: To-do
                  icon: mdi:format-list-checkbox
                - type: custom:auto-entities
                  show_empty: false
                  card:
                    square: false
                    type: grid
                    columns: 2
                  card_param: cards
                  filter:
                    template: |-
                      {% set updates= states.input_boolean
                            | selectattr('entity_id', 'contains', 'chores')
                            | selectattr('state', 'eq', 'on')
                            |sort(attribute='attributes.friendly_name')
                            |map(attribute='entity_id')
                            |list
                      %}
                      {% for cat in updates -%}
                      {{
                        {
                          'type': 'custom:button-card',
                          'entity': cat,
                          'label': 'Open',
                          'template': 'switch_label_template',
                        }
                      }},
                      {%- endfor %}
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: separator
                name: Completed
                icon: mdi:list-status
              - type: custom:auto-entities
                show_empty: false
                card:
                  square: false
                  type: grid
                  columns: 2
                card_param: cards
                filter:
                  template: |-
                    {% set updates= states.input_boolean
                          | selectattr('entity_id', 'contains', 'chores')
                          | selectattr('state', 'eq', 'off')
                          |sort(attribute='attributes.friendly_name')
                          |map(attribute='entity_id')
                          |list
                    %}
                    {% for cat in updates -%}
                    {{
                      {
                        'type': 'custom:button-card',
                        'entity': cat,
                        'label': 'Done',
                        'template': 'switch_label_template',
                      }
                    }},
                    {%- endfor %}
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Alarm
            icon: mdi:alarm
            hash: "#alarm"
            button_type: name
          - square: false
            columns: 1
            type: grid
            cards:
              - square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:button-card
                    entity: input_boolean.light_alarm
                    label: >-
                      [[[ return
                      states["sensor.light_alarm_time_readable"].state ]]]
                    template: switch_label_template
                    variables:
                      icon_on: mdi:alarm-light-outline
                      icon_off: mdi:alarm-light-off-outline
                      color: var(--yellow)
                  - type: custom:button-card
                    entity: input_boolean.sound_alarm
                    label: "[[[ return states[\"sensor.wake_time_1\"].state ]]]"
                    template: switch_label_template
                    variables:
                      icon_on: mdi:alarm-note
                      icon_off: mdi:alarm-note-off
                      color: var(--green)
              - type: custom:button-card
                entity: sensor.wake_time_1
                icon: |
                  [[[
                    if (states['binary_sensor.is_alarm_on'].state == "on") return "mdi:alarm";
                    else return "mdi:alarm-off";
                  ]]]
                show_icon: true
                show_state: true
                show_name: false
                tap_action:
                  action: none
                styles:
                  grid:
                    - grid-template-areas: "\". plus1 plus2 .\" \"i s s .\" \". minus1 minus2 .\""
                    - grid-template-columns: 1fr min-content min-content 1fr
                    - grid-template-rows: 1fr min-content
                  card:
                    - background: none
                    - box-shadow: none
                  state:
                    - font-size: 50px
                  icon:
                    - color: |
                        [[[
                          if (states['binary_sensor.is_alarm_on'].state == "on") return "var(--contrast20)";
                          else return "var(--contrast10)";
                        ]]]
                custom_fields:
                  plus1:
                    card:
                      type: custom:button-card
                      icon: mdi:plus
                      tap_action:
                        action: perform-action
                        perform_action: input_number.increment
                        target:
                          entity_id: input_number.wakehour_1
                      styles:
                        card:
                          - background: none
                          - box-shadow: none
                  plus2:
                    card:
                      type: custom:button-card
                      icon: mdi:plus
                      tap_action:
                        action: perform-action
                        perform_action: input_number.increment
                        target:
                          entity_id: input_number.wakeminutes_1
                      styles:
                        card:
                          - background: none
                          - box-shadow: none
                  minus1:
                    card:
                      type: custom:button-card
                      icon: mdi:minus
                      tap_action:
                        action: perform-action
                        perform_action: input_number.decrement
                        target:
                          entity_id: input_number.wakehour_1
                      styles:
                        card:
                          - background: none
                          - box-shadow: none
                  minus2:
                    card:
                      type: custom:button-card
                      icon: mdi:minus
                      tap_action:
                        action: perform-action
                        perform_action: input_number.decrement
                        target:
                          entity_id: input_number.wakeminutes_1
                      styles:
                        card:
                          - background: none
                          - box-shadow: none
              - square: true
                columns: 7
                type: grid
                cards:
                  - type: custom:button-card
                    entity: input_boolean.wakeweekday_mon_1
                    show_name: true
                    show_icon: false
                    name: Mo
                    aspect_ratio: 1/1
                    tap_action:
                      action: toggle
                    styles:
                      card:
                        - border-radius: 14px
                        - background-color: |
                            [[[
                              if (entity.state == "on") return "var(--orange)";
                              else return "var(--contrast2)";
                            ]]]
                      name:
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                  - type: custom:button-card
                    entity: input_boolean.wakeweekday_tue_1
                    show_name: true
                    show_icon: false
                    name: Tu
                    aspect_ratio: 1/1
                    tap_action:
                      action: toggle
                    styles:
                      card:
                        - border-radius: 14px
                        - background-color: |
                            [[[
                              if (entity.state == "on") return "var(--green)";
                              else return "var(--contrast2)";
                            ]]]
                      name:
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                  - type: custom:button-card
                    entity: input_boolean.wakeweekday_wed_1
                    show_name: true
                    show_icon: false
                    name: We
                    aspect_ratio: 1/1
                    tap_action:
                      action: toggle
                    styles:
                      card:
                        - border-radius: 14px
                        - background-color: |
                            [[[
                              if (entity.state == "on") return "var(--blue)";
                              else return "var(--contrast2)";
                            ]]]
                      name:
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                  - type: custom:button-card
                    entity: input_boolean.wakeweekday_thu_1
                    show_name: true
                    show_icon: false
                    name: Th
                    aspect_ratio: 1/1
                    tap_action:
                      action: toggle
                    styles:
                      card:
                        - border-radius: 14px
                        - background-color: |
                            [[[
                              if (entity.state == "on") return "var(--red)";
                              else return "var(--contrast2)";
                            ]]]
                      name:
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                  - type: custom:button-card
                    entity: input_boolean.wakeweekday_fri_1
                    show_name: true
                    show_icon: false
                    name: Fr
                    aspect_ratio: 1/1
                    tap_action:
                      action: toggle
                    styles:
                      card:
                        - border-radius: 14px
                        - background-color: |
                            [[[
                              if (entity.state == "on") return "var(--purple)";
                              else return "var(--contrast2)";
                            ]]]
                      name:
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                  - type: custom:button-card
                    entity: input_boolean.wakeweekday_sat_1
                    show_name: true
                    show_icon: false
                    name: Sa
                    aspect_ratio: 1/1
                    tap_action:
                      action: toggle
                    styles:
                      card:
                        - border-radius: 14px
                        - background-color: |
                            [[[
                              if (entity.state == "on") return "var(--yellow)";
                              else return "var(--contrast2)";
                            ]]]
                      name:
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
                  - type: custom:button-card
                    entity: input_boolean.wakeweekday_sun_1
                    show_name: true
                    show_icon: false
                    name: Su
                    aspect_ratio: 1/1
                    tap_action:
                      action: toggle
                    styles:
                      card:
                        - border-radius: 14px
                        - background-color: |
                            [[[
                              if (entity.state == "on") return "var(--teal)";
                              else return "var(--contrast2)";
                            ]]]
                      name:
                        - color: |
                            [[[
                              if (entity.state == "on") return "var(--black)";
                              else return "var(--contrast20)";
                            ]]]
              - square: false
                type: grid
                cards:
                  - type: custom:button-card
                    name: Light Offset
                    entity: input_number.light_alarm_offset
                    show_state: false
                    template: custom_card_number_slider
                    variables:
                      icon: "[[[ return entity.attributes.icon ]]]"
                      label: >-
                        [[[return
                        Math.round(states["input_number.light_alarm_offset"].state)
                        + "min" ]]]
                      color: var(--yellow)
                  - type: custom:button-card
                    name: Volume
                    entity: input_number.alarm_volume
                    show_state: false
                    template: custom_card_number_slider
                    variables:
                      icon: "[[[ return entity.attributes.icon ]]]"
                      label: >-
                        [[[return states["input_number.alarm_volume"].state*100
                        + "%"]]]
                      color: var(--green)
                columns: 2
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Climate
            icon: mdi:thermometer
            hash: "#climate"
            button_type: name
          - square: false
            type: grid
            cards:
              - type: custom:mini-graph-card
                entities:
                  - sensor.temperature_mean
                name: Temperature
                line_color: var(--red)
              - type: custom:mini-graph-card
                entities:
                  - sensor.humidity_mean
                name: Humidity
                line_color: var(--blue)
            columns: 2
          - features:
              - type: climate-preset-modes
                style: dropdown
                preset_modes:
                  - away
                  - home
            type: tile
            entity: climate.bathroom
            name: Mode
            icon: mdi:home-thermometer-outline
            vertical: false
            state_content:
              - preset_mode
              - current_temperature
            features_position: bottom
          - type: heading
            icon: mdi:thermostat
            heading: Thermostat
            heading_style: title
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:button-card
                entity: climate.living_room
                template: custom_card_climate
                variables:
                  sensor: binary_sensor.living_room_window_door_sensor
                  name: "[[[ return \"Living<br>Room\" ]]]"
                  radius: 24px
              - type: custom:button-card
                entity: climate.bed_room
                template: custom_card_climate
                variables:
                  sensor: binary_sensor.bed_room_window_door_sensor
                  name: "[[[ return \"Bedroom\" ]]]"
                  radius: 24px
              - type: custom:button-card
                entity: climate.office
                template: custom_card_climate
                variables:
                  sensor: binary_sensor.office_window_door_sensor
                  name: "[[[ return \"Office<br>\" ]]]"
                  radius: 24px
              - type: custom:button-card
                entity: climate.kitchen
                template: custom_card_climate
                variables:
                  sensor: binary_sensor.kitchen_window_door_sensor
                  name: "[[[ return \"Kitchen\" ]]]"
                  radius: 24px
              - type: custom:button-card
                entity: climate.bathroom
                template: custom_card_climate
                variables:
                  sensor: binary_sensor.bathroom_window_door_sensor
                  name: "[[[ return \"Bathroom\" ]]]"
                  radius: 24px
              - type: custom:button-card
                entity: climate.guest_room
                template: custom_card_climate
                variables:
                  sensor: binary_sensor.guest_room_window_door_sensor
                  name: "[[[ return \"Guest<br>Room\" ]]]"
                  radius: 24px
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Vacuum
            icon: mdi:robot-vacuum
            hash: "#vacuum"
            button_type: name
          - type: picture-entity
            entity: camera.p10_pro_ultra_map
            show_state: false
            show_name: false
          - type: custom:button-card
            entity: vacuum.p10_pro_ultra
            name: P10 Pro Ultra
            icon: |
              [[[
                if (entity.state == 'idle') {
                  return 'mdi:dots-circle';
                } else if (entity.state == 'cleaning') {
                  return 'mdi:robot-vacuum';
                } else if (entity.state == 'docked') {
                  return 'mdi:robot-vacuum-off';
                } else {
                  return 'mdi:robot-vacuum-alert';
                }
              ]]]
            show_name: true
            show_icon: true
            show_label: true
            show_state: false
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            double_tap_action:
              action: call-service
              service: vacuum.return_to_base
              service_data:
                entity_id: vacuum.p10_pro_ultra
            label: "[[[ return states[\"vacuum.p10_pro_ultra\"].state ]]]"
            custom_fields:
              icon1:
                card:
                  type: custom:button-card
                  icon: mdi:robot-vacuum
                  styles:
                    card:
                      - background-color: var(--contrast1)
                      - width: 30px
                      - height: 30px
                    icon:
                      - width: 18px
                      - color: var(--contrast20)
            styles:
              grid:
                - grid-template-areas: "\". icon1\" \"l l\" \"n .\" \"rem .\" \"bar bar\" \"start end\""
                - grid-template-rows: 24px 1fr 24px min-content min-content min-content
                - grid-template-columns: 60% 40%
              card:
                - height: 100%
                - padding: 1rem
                - background: |
                    [[[
                      if (entity.state == 'docked') {
                        return 'var(--contrast2)';
                      } else if (entity.state == 'cleaning') {
                        return 'var(--green)';
                      } else if (entity.state == 'idle') {
                        return 'var(--yellow)';
                      } else {
                        return 'var(--red)';
                      }
                    ]]]
              img_cell:
                - position: absolute
                - top: 20%
                - left: 40%
                - overflow: visible
              icon:
                - position: absolute
                - width: 20em
                - opacity: 20%
                - color: |
                    [[[
                      if (entity.state == 'docked') {
                        return 'var(--white)';
                      } else {
                        return 'var(--black)';
                      }
                    ]]]
                - transform: rotate(-20deg)
                - animation: |
                    [[[
                      if (entity.state == 'docked') {
                        return 'null';
                      } else if (entity.state == 'idle') {
                        return 'blink 1.5s linear infinite';
                      } else if (entity.state == 'cleaning') {
                        return 'rotating 2s linear infinite';
                      } else {
                        return 'blink 1.5s linear infinite';
                      }
                    ]]]
              label:
                - text-align: left
                - font-size: 18px
                - font-weight: 500
                - justify-self: start
                - align-self: end
                - overflow: visible
                - color: |
                    [[[
                      if (entity.state == 'docked') {
                        return 'var(--contrast20)';
                      } else {
                        return 'var(--black)';
                      }
                    ]]]
              name:
                - text-align: left
                - font-size: 12px
                - opacity: 0.7
                - justify-self: start
                - align-self: center
                - overflow: visible
                - color: |
                    [[[
                      if (entity.state == 'docked') {
                        return 'var(--contrast20)';
                      } else {
                        return 'var(--black)';
                      }
                    ]]]
              custom_fields:
                icon1:
                  - justify-self: end
                  - width: 24px
                  - color: |
                      [[[
                        if (entity.state == 'docked') {
                          return 'var(--contrast20)';
                        } else {
                          return 'var(--black)';
                        }
                      ]]]
              hold_action:
                action: more-info
          - type: entities
            entities:
              - entity: select.p10_pro_ultra_cleaning_mode
                name: Cleaning Mode
              - entity: select.p10_pro_ultra_suction_level
                name: Suction Level
          - type: heading
            heading: Select Rooms
            heading_style: subtitle
            icon: mdi:floor-plan
          - square: false
            columns: 4
            type: grid
            cards:
              - type: custom:button-card
                entity: input_boolean.vacuum_kitchen
                name: Kitchen
                icon: mdi:silverware-fork-knife
                show_name: true
                show_icon: true
                show_state: false
                color_type: card
                color: var(--blue)
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.vacuum_kitchen
                styles:
                  card:
                    - border-radius: 12px
                    - padding: 12px
                  name:
                    - font-size: 12px
                state:
                  - value: "off"
                    color: var(--contrast20)
                    styles:
                      card:
                        - background: var(--contrast2)
                      icon:
                        - color: var(--contrast20)
                      name:
                        - color: var(--contrast20)
                  - value: "on"
                    color: var(--blue)
                    styles:
                      card:
                        - background: var(--blue)
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
              - type: custom:button-card
                entity: input_boolean.vacuum_living_room
                name: Living Room
                icon: mdi:sofa
                show_name: true
                show_icon: true
                show_state: false
                color_type: card
                color: var(--blue)
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.vacuum_living_room
                styles:
                  card:
                    - border-radius: 12px
                    - padding: 12px
                  name:
                    - font-size: 12px
                state:
                  - value: "off"
                    color: var(--contrast20)
                    styles:
                      card:
                        - background: var(--contrast2)
                      icon:
                        - color: var(--contrast20)
                      name:
                        - color: var(--contrast20)
                  - value: "on"
                    color: var(--blue)
                    styles:
                      card:
                        - background: var(--blue)
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
              - type: custom:button-card
                entity: input_boolean.vacuum_master_bedroom
                name: Master Bed
                icon: mdi:bed-king
                show_name: true
                show_icon: true
                show_state: false
                color_type: card
                color: var(--blue)
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.vacuum_master_bedroom
                styles:
                  card:
                    - border-radius: 12px
                    - padding: 12px
                  name:
                    - font-size: 12px
                state:
                  - value: "off"
                    color: var(--contrast20)
                    styles:
                      card:
                        - background: var(--contrast2)
                      icon:
                        - color: var(--contrast20)
                      name:
                        - color: var(--contrast20)
                  - value: "on"
                    color: var(--blue)
                    styles:
                      card:
                        - background: var(--blue)
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
              - type: custom:button-card
                entity: input_boolean.vacuum_east_bedroom
                name: East Bed
                icon: mdi:bed
                show_name: true
                show_icon: true
                show_state: false
                color_type: card
                color: var(--blue)
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.vacuum_east_bedroom
                styles:
                  card:
                    - border-radius: 12px
                    - padding: 12px
                  name:
                    - font-size: 12px
                state:
                  - value: "off"
                    color: var(--contrast20)
                    styles:
                      card:
                        - background: var(--contrast2)
                      icon:
                        - color: var(--contrast20)
                      name:
                        - color: var(--contrast20)
                  - value: "on"
                    color: var(--blue)
                    styles:
                      card:
                        - background: var(--blue)
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
              - type: custom:button-card
                entity: input_boolean.vacuum_west_bedroom
                name: West Bed
                icon: mdi:bed-single
                show_name: true
                show_icon: true
                show_state: false
                color_type: card
                color: var(--blue)
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.vacuum_west_bedroom
                styles:
                  card:
                    - border-radius: 12px
                    - padding: 12px
                  name:
                    - font-size: 12px
                state:
                  - value: "off"
                    color: var(--contrast20)
                    styles:
                      card:
                        - background: var(--contrast2)
                      icon:
                        - color: var(--contrast20)
                      name:
                        - color: var(--contrast20)
                  - value: "on"
                    color: var(--blue)
                    styles:
                      card:
                        - background: var(--blue)
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
              - type: custom:button-card
                entity: input_boolean.vacuum_master_bathroom
                name: Master Bath
                icon: mdi:shower
                show_name: true
                show_icon: true
                show_state: false
                color_type: card
                color: var(--blue)
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.vacuum_master_bathroom
                styles:
                  card:
                    - border-radius: 12px
                    - padding: 12px
                  name:
                    - font-size: 12px
                state:
                  - value: "off"
                    color: var(--contrast20)
                    styles:
                      card:
                        - background: var(--contrast2)
                      icon:
                        - color: var(--contrast20)
                      name:
                        - color: var(--contrast20)
                  - value: "on"
                    color: var(--blue)
                    styles:
                      card:
                        - background: var(--blue)
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
              - type: custom:button-card
                entity: input_boolean.vacuum_first_floor_bathroom
                name: 1st Fl Bath
                icon: mdi:toilet
                show_name: true
                show_icon: true
                show_state: false
                color_type: card
                color: var(--blue)
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.vacuum_first_floor_bathroom
                styles:
                  card:
                    - border-radius: 12px
                    - padding: 12px
                  name:
                    - font-size: 12px
                state:
                  - value: "off"
                    color: var(--contrast20)
                    styles:
                      card:
                        - background: var(--contrast2)
                      icon:
                        - color: var(--contrast20)
                      name:
                        - color: var(--contrast20)
                  - value: "on"
                    color: var(--blue)
                    styles:
                      card:
                        - background: var(--blue)
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
              - type: custom:button-card
                entity: input_boolean.vacuum_hallway
                name: Hallway
                icon: mdi:door-open
                show_name: true
                show_icon: true
                show_state: false
                color_type: card
                color: var(--blue)
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.vacuum_hallway
                styles:
                  card:
                    - border-radius: 12px
                    - padding: 12px
                  name:
                    - font-size: 12px
                state:
                  - value: "off"
                    color: var(--contrast20)
                    styles:
                      card:
                        - background: var(--contrast2)
                      icon:
                        - color: var(--contrast20)
                      name:
                        - color: var(--contrast20)
                  - value: "on"
                    color: var(--blue)
                    styles:
                      card:
                        - background: var(--blue)
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
          - type: custom:button-card
            name: Start Selected
            icon: mdi:play
            show_name: true
            show_icon: true
            tap_action:
              action: call-service
              service: script.vacuum_clean_selected_rooms
            styles:
              card:
                - background: var(--green)
                - border-radius: 12px
                - padding: 8px
              icon:
                - color: var(--black)
                - width: 18px
              name:
                - color: var(--black)
                - font-size: 12px
          - type: heading
            heading: Controls
            heading_style: subtitle
            icon: mdi:robot-vacuum
          - square: false
            columns: 3
            type: grid
            cards:
              - type: custom:button-card
                entity: vacuum.p10_pro_ultra
                icon: mdi:pause
                label: Start
                name: >-
                  [[[return states["sensor.p10_pro_ultra_battery_level"].state +
                  "% Battery"]]]
                template: button_template
                variables:
                  icon2: mdi:play
                  state_on: cleaning
                  state_off: docked
                  background_color_off: var(--green)
                  background_color_on: var(--red)
                  color_on: var(--black)
                  color_off: var(--black)
                tap_action:
                  action: call-service
                  service: vacuum.start
                  service_data:
                    entity_id: vacuum.p10_pro_ultra
                  haptic: success
              - type: custom:button-card
                entity: vacuum.p10_pro_ultra
                icon: mdi:home-variant
                name: >-
                  [[[ return "Currently " + states["vacuum.p10_pro_ultra"].state
                  ]]]
                label: Return
                show_label: true
                tap_action:
                  action: call-service
                  service: vacuum.return_to_base
                  service_data:
                    entity_id: vacuum.p10_pro_ultra
                  haptic: success
                template: button_template
                variables:
                  icon2: mdi:home-variant
                  state_on: cleaning
                  state_off: docked
                  background_color_off: var(--red)
                  background_color_on: var(--red)
                  color_on: var(--black)
                  color_off: var(--black)
              - type: custom:button-card
                entity: sensor.p10_pro_ultra_main_brush_left
                template: custom_card_sensor_small
                name: Main Brush
                variables:
                  state: |
                    [[[ 
                      var st = states[entity.entity_id].state;
                      var uni = '%';
                      return `
                      ${st}<span style="font-size:
                    0.5em;opacity:0.7">${uni}</span>
                      `
                    ]]]
              - type: custom:button-card
                entity: sensor.p10_pro_ultra_side_brush_left
                template: custom_card_sensor_small
                name: Side Brush
                variables:
                  state: |
                    [[[ 
                      var st = states[entity.entity_id].state;
                      var uni = '%';
                      return `
                      ${st}<span style="font-size:
                    0.5em;opacity:0.7">${uni}</span>
                      `
                    ]]]
              - type: custom:button-card
                entity: sensor.p10_pro_ultra_filter_left
                template: custom_card_sensor_small
                name: Filter
                variables:
                  state: |
                    [[[ 
                      var st = states[entity.entity_id].state;
                      var uni = '%';
                      return `
                      ${st}<span style="font-size:
                    0.5em;opacity:0.7">${uni}</span>
                      `
                    ]]]
              - type: custom:button-card
                entity: sensor.p10_pro_ultra_cleaning_count
                template: custom_card_sensor_small
                name: Total Cleanings
                variables:
                  state: |
                    [[[ 
                      var st = states[entity.entity_id].state;
                      var uni = ' ';
                      return `
                      ${st}<span style="font-size:
                    0.5em;opacity:0.7">${uni}</span>
                      `
                    ]]]
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Remote
            icon: mdi:television
            hash: "#remote"
            button_type: name
            sub_button:
              - entity: select.harmony_hub_activities
                show_name: false
                show_state: true
          - type: conditional
            conditions:
              - condition: state
                entity: binary_sensor.is_tv_on
                state: "on"
              - entity: switch.harmony_hub_nintendo_switch
                state_not: "on"
            card:
              type: heading
              icon: mdi:multimedia
              heading: Media
              heading_style: title
          - type: conditional
            conditions:
              - condition: state
                entity: binary_sensor.is_tv_on
                state: "on"
              - entity: switch.harmony_hub_nintendo_switch
                state_not: "on"
            card:
              type: custom:button-card
              entity: media_player.tv_and_ps5
              template: custom_card_mediaplayer_tv
          - type: heading
            icon: mdi:star
            heading: Activities
            heading_style: title
          - columns: 4
            type: grid
            cards:
              - type: custom:button-card
                entity: select.harmony_hub_activities
                icon: mdi:television-guide
                show_name: false
                aspect_ratio: 1/1
                tap_action:
                  action: call-service
                  service: select.select_option
                  target:
                    entity_id: select.harmony_hub_activities
                  data:
                    option: Smart TV
                  haptic: medium
                hold_action:
                  action: more-info
                styles:
                  card:
                    - border-radius: 24px
                    - background-color: var(--green)
                  icon:
                    - color: |
                        [[[
                          if (entity.state == "Smart TV") return "var(--white)";
                          else return "var(--black)";
                        ]]]
              - type: custom:button-card
                entity: select.harmony_hub_activities
                icon: mdi:netflix
                show_name: false
                aspect_ratio: 1/1
                tap_action:
                  action: call-service
                  service: select.select_option
                  target:
                    entity_id: select.harmony_hub_activities
                  data:
                    option: Netflix
                  haptic: medium
                hold_action:
                  action: more-info
                styles:
                  card:
                    - border-radius: 24px
                    - background-color: var(--red)
                  icon:
                    - color: |
                        [[[
                          if (entity.state == "Netflix") return "var(--white)";
                          else return "var(--black)";
                        ]]]
              - type: custom:button-card
                entity: select.harmony_hub_activities
                icon: mdi:sony-playstation
                show_name: false
                aspect_ratio: 1/1
                tap_action:
                  action: call-service
                  service: select.select_option
                  target:
                    entity_id: select.harmony_hub_activities
                  data:
                    option: Playstation
                  haptic: medium
                hold_action:
                  action: more-info
                styles:
                  card:
                    - border-radius: 24px
                    - background-color: var(--blue)
                  icon:
                    - color: |
                        [[[
                          if (entity.state == "Playstation") return "var(--white)";
                          else return "var(--black)";
                        ]]]
              - type: custom:button-card
                entity: select.harmony_hub_activities
                icon: mdi:nintendo-switch
                show_name: false
                aspect_ratio: 1/1
                tap_action:
                  action: call-service
                  service: select.select_option
                  target:
                    entity_id: select.harmony_hub_activities
                  data:
                    option: Nintendo Switch
                  haptic: medium
                hold_action:
                  action: more-info
                styles:
                  card:
                    - border-radius: 24px
                    - background-color: var(--red)
                  icon:
                    - color: |
                        [[[
                          if (entity.state == "Nintendo Switch") return "var(--white)";
                          else return "var(--black)";
                        ]]]
          - type: heading
            icon: mdi:remote-tv
            heading: Remote
            heading_style: title
          - type: grid
            cards:
              - type: custom:button-card
                icon: mdi:volume-minus
                aspect_ratio: 1/1
                entity: media_player.apple_tv_4k_2
                show_name: false
                tap_action:
                  action: call-service
                  service: remote.send_command
                  service_data:
                    device: "53906750"
                    command: VolumeDown
                    entity_id: remote.harmony_hub
                styles:
                  card:
                    - border-radius: 24px
                    - background-color: var(--contrast2)
                  icon:
                    - width: 32px
                    - color: var(--contrast8)
                state:
                  - value: "on"
                    styles:
                      icon:
                        - color: var(--contrast20)
              - type: custom:button-card
                icon: mdi:volume-mute
                aspect_ratio: 1/1
                entity: media_player.apple_tv_4k_2
                show_name: false
                tap_action:
                  action: call-service
                  service: remote.send_command
                  service_data:
                    device: "53906750"
                    command: Mute
                    entity_id: remote.harmony_hub
                styles:
                  card:
                    - border-radius: 24px
                    - background-color: var(--contrast2)
                  icon:
                    - width: 32px
                    - color: var(--contrast8)
                state:
                  - value: "on"
                    styles:
                      icon:
                        - color: var(--contrast20)
              - type: custom:button-card
                icon: mdi:volume-plus
                aspect_ratio: 1/1
                entity: media_player.apple_tv_4k_2
                show_name: false
                tap_action:
                  action: call-service
                  service: remote.send_command
                  service_data:
                    device: "53906750"
                    command: VolumeUp
                    entity_id: remote.harmony_hub
                styles:
                  card:
                    - border-radius: 24px
                    - background-color: var(--contrast2)
                  icon:
                    - width: 32px
                    - color: var(--contrast8)
                state:
                  - value: "on"
                    styles:
                      icon:
                        - color: var(--contrast20)
              - type: custom:button-card
                icontype: custom:button-card
                icon: mdi:power
                entity: remote.harmony_hub
                show_name: false
                aspect_ratio: 1/1
                tap_action:
                  action: call-service
                  service: script.turn_on_tv
                styles:
                  card:
                    - border-radius: 24px
                    - background: var(--green)
                  icon:
                    - width: 32px
                    - color: var(--black)
                state:
                  - value: "on"
                    styles:
                      card:
                        - background: var(--red)
              - type: custom:button-card
                icon: mdi:chevron-up
                aspect_ratio: 1/1
                entity: media_player.apple_tv_4k_2
                show_name: false
                tap_action:
                  action: call-service
                  service: remote.send_command
                  service_data:
                    device: "77485195"
                    command: DirectionUp
                    entity_id: remote.harmony_hub
                styles:
                  card:
                    - border-radius: 24px
                    - background-color: var(--contrast2)
                  icon:
                    - width: 32px
                    - color: var(--contrast8)
                state:
                  - value: "on"
                    styles:
                      icon:
                        - color: var(--contrast20)
              - type: custom:button-card
                aspect_ratio: 1/1
                show_name: false
                tap_action:
                  action: call-service
                  haptic: medium
                  service: media_player.media_play_pause
                  service_data:
                    entity_id: media_player.apple_tv_4k_2
                styles:
                  icon:
                    - width: 32px
                    - color: var(--contrast8)
                  card:
                    - border-radius: 24px
                    - background-color: var(--contrast2)
                icon: mdi:pause
                entity: media_player.apple_tv_4k_2
                state:
                  - value: paused
                    icon: mdi:play
                    styles:
                      card:
                        - background-color: var(--green)
                      icon:
                        - color: var(--black)
                  - value: playing
                    styles:
                      card:
                        - background-color: var(--yellow)
                      icon:
                        - color: var(--black)
              - type: custom:button-card
                icon: mdi:chevron-left
                aspect_ratio: 1/1
                entity: media_player.apple_tv_4k_2
                show_name: false
                tap_action:
                  action: call-service
                  service: remote.send_command
                  service_data:
                    device: "77485195"
                    command: DirectionLeft
                    entity_id: remote.harmony_hub
                styles:
                  card:
                    - border-radius: 24px
                    - background-color: var(--contrast2)
                  icon:
                    - width: 32px
                    - color: var(--contrast8)
                state:
                  - value: "on"
                    styles:
                      icon:
                        - color: var(--contrast20)
              - type: custom:button-card
                icon: mdi:circle-outline
                aspect_ratio: 1/1
                entity: media_player.apple_tv_4k_2
                show_name: false
                tap_action:
                  action: call-service
                  service: remote.send_command
                  service_data:
                    device: "77485195"
                    command: Select
                    entity_id: remote.harmony_hub
                styles:
                  card:
                    - border-radius: 24px
                    - background-color: var(--contrast2)
                  icon:
                    - width: 32px
                    - color: var(--contrast8)
                state:
                  - value: "on"
                    styles:
                      icon:
                        - color: var(--contrast20)
              - type: custom:button-card
                icon: mdi:chevron-right
                aspect_ratio: 1/1
                entity: media_player.apple_tv_4k_2
                show_name: false
                tap_action:
                  action: call-service
                  service: remote.send_command
                  service_data:
                    device: "77485195"
                    command: DirectionRight
                    entity_id: remote.harmony_hub
                styles:
                  card:
                    - border-radius: 24px
                    - background-color: var(--contrast2)
                  icon:
                    - width: 32px
                    - color: var(--contrast8)
                state:
                  - value: "on"
                    styles:
                      icon:
                        - color: var(--contrast20)
              - type: custom:button-card
                icon: mdi:arrow-left
                aspect_ratio: 1/1
                entity: media_player.apple_tv_4k_2
                show_name: false
                tap_action:
                  action: call-service
                  service: remote.send_command
                  service_data:
                    device: "53906339"
                    command: Back
                    entity_id: remote.harmony_hub
                styles:
                  card:
                    - border-radius: 24px
                    - background-color: var(--contrast2)
                  icon:
                    - width: 32px
                    - color: var(--contrast8)
                state:
                  - value: "on"
                    styles:
                      icon:
                        - color: var(--contrast20)
              - type: custom:button-card
                icon: mdi:chevron-down
                aspect_ratio: 1/1
                entity: media_player.apple_tv_4k_2
                show_name: false
                tap_action:
                  action: call-service
                  service: remote.send_command
                  service_data:
                    device: "77485195"
                    command: DirectionDown
                    entity_id: remote.harmony_hub
                styles:
                  card:
                    - border-radius: 24px
                    - background-color: var(--contrast2)
                  icon:
                    - width: 32px
                    - color: var(--contrast8)
                state:
                  - value: "on"
                    styles:
                      icon:
                        - color: var(--contrast20)
              - type: custom:button-card
                icon: mdi:home-variant
                aspect_ratio: 1/1
                entity: media_player.apple_tv_4k_2
                show_name: false
                tap_action:
                  action: call-service
                  service: remote.send_command
                  service_data:
                    device: "77485195"
                    command: Home
                    entity_id: remote.harmony_hub
                styles:
                  card:
                    - border-radius: 24px
                    - background-color: var(--contrast2)
                  icon:
                    - width: 32px
                    - color: var(--contrast8)
                state:
                  - value: "on"
                    styles:
                      icon:
                        - color: var(--contrast20)
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: "#david"
            name: David
            icon: mdi:face-agent
            bg_opacity: 100
            hide_backdrop: true
            bg_blur: 100
            bg_color: var(--contrast1)
            button_type: name
            sub_button:
              - entity: person.david
                show_background: false
                show_state: true
          - type: heading
            icon: mdi:account
            heading: Personal
            heading_style: title
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                entity: input_boolean.notifications_davids_iphone
                name: My Notifications
                template: switch_template
                variables:
                  icon_on: mdi:cellphone-message
                  icon_off: mdi:cellphone-message-off
                  color: var(--purple)
            columns: 2
          - type: heading
            icon: mdi:home
            heading: Home
            heading_style: title
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                template: switch_template
                entity: switch.wright_guest
                name: Guest WIFI
                variables:
                  icon_on: mdi:wifi
                  icon_off: mdi:wifi-off
                  color: var(--blue)
            columns: 2
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: "#anna"
            name: Anna
            icon: mdi:face-woman
            bg_opacity: 100
            hide_backdrop: true
            bg_blur: 100
            bg_color: var(--contrast1)
          - type: heading
            icon: mdi:account
            heading: Personal
            heading_style: title
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                entity: binary_sensor.is_alarm_on
                name: Alarm
                label: "[[[return states[\"sensor.wake_time_1\"].state]]]"
                template: nav_button_small
                variables:
                  navigation_path: home#alarm
                  icon_on: mdi:alarm
                  icon_off: mdi:alarm-off
                  background_color_on: var(--yellow)
                  background_color_off: var(--contrast2)
                  color_on: var(--black)
                  color_off: var(--contrast20)
              # MISSING ENTITY: input_boolean.notifications_anna - See missing_entities.md
              # - type: custom:button-card
              #   entity: input_boolean.notifications_anna
              #   icon: mdi:cellphone-message-off
              #   name: My Notifications
              #   template: switch_template
              #   variables:
              #     icon_on: mdi:cellphone-message
              #     icon_off: mdi:cellphone-message-off
              #     color: var(--purple)
              - type: custom:button-card
                entity: input_boolean.motion_lights
                name: Motion Lights
                template: switch_template
                variables:
                  icon_on: mdi:lightbulb-auto-outline
                  icon_off: mdi:lightbulb-off-outline
                  color: var(--green)
              - type: custom:button-card
                name: Min Brightness
                entity: input_number.al_min_brightness_anna
                show_state: false
                template: custom_card_number_slider
                variables:
                  icon: mdi:brightness-5
                  label: >-
                    [[[return
                    Math.round(states["input_number.al_min_brightness_anna"].state)
                    + "/255"]]]
                  color: var(--yellow)
            columns: 2
          - type: heading
            icon: mdi:home
            heading: Home
            heading_style: title
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                entity: input_boolean.vacation_mode
                icon: mdi:weather-sunny-off
                name: Vacation Mode
                template: switch_template
                variables:
                  icon_on: mdi:weather-sunny
                  icon_off: mdi:weather-sunny-off
                  color: var(--orange)
              - type: custom:button-card
                entity: switch.voice_assistant_mute_switch
                icon: mdi:account-tie-voice-off
                name: Voice Mute Switch
                template: switch_label_template
                label: |
                  [[[
                    if (entity.state == "on"){
                      return "Muted";
                    } else {
                      return "Off";
                    }
                  ]]]
                variables:
                  icon_on: mdi:account-tie-voice-off
                  icon_off: mdi:account-tie-voice
                  color: var(--red)
              - type: custom:button-card
                template: switch_template
                entity: switch.adguard_protection
                name: AdGuard
                variables:
                  icon_on: mdi:shield-check
                  icon_off: mdi:shield-off
                  color: var(--purple)
              - type: custom:button-card
                template: switch_template
                entity: switch.junglemoneyguest
                name: Guest WIFI
                variables:
                  icon_on: mdi:wifi
                  icon_off: mdi:wifi-off
                  color: var(--blue)
            columns: 2
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: "#weather"
            name: Weather
            icon: mdi:weather-partly-cloudy
            bg_opacity: 100
            hide_backdrop: true
            bg_blur: 100
            bg_color: var(--contrast1)
            button_type: name
          - type: custom:clock-weather-card
            entity: weather.forecast_home
            forecast_rows: 5
            locale: en
            time_format: 12
            date_pattern: EEE, MMM d
            hide_today_section: false
            hide_forecast_section: false
            hide_clock: false
            hide_date: false
            hourly_forecast: true
            animated_icon: true
          - type: iframe
            url: >-
              https://embed.windy.com/embed2.html?lat=42.0189&lon=-87.8023&detailLat=42.0189&detailLon=-87.8023&width=650&height=450&zoom=9&level=surface&overlay=rain&product=ecmwf&menu=&message=&marker=&calendar=now&pressure=&type=map&location=coordinates&detail=&metricWind=default&metricTemp=default&radarRange=-1
            aspect_ratio: 80%
          - type: heading
            icon: mdi:thermometer
            heading: Current Conditions
            heading_style: title
          - square: false
            type: grid
            cards:
              - type: tile
                entity: sensor.openweathermap_temperature
                name: Temperature
                icon: mdi:thermometer
                color: orange
              - type: tile
                entity: sensor.openweathermap_feels_like_temperature
                name: Feels Like
                icon: mdi:thermometer-lines
                color: red
              - type: tile
                entity: sensor.openweathermap_humidity
                name: Humidity
                icon: mdi:water-percent
                color: blue
              - type: tile
                entity: sensor.openweathermap_wind_speed
                name: Wind
                icon: mdi:weather-windy
                color: teal
              - type: tile
                entity: sensor.openweathermap_uv_index
                name: UV Index
                icon: mdi:sun-wireless
                color: yellow
              - type: tile
                entity: sensor.openweathermap_visibility
                name: Visibility
                icon: mdi:eye
                color: cyan
            columns: 2
          - type: heading
            icon: mdi:heart-pulse
            heading: Health Indices
            heading_style: title
          - square: false
            type: grid
            cards:
              - type: tile
                entity: sensor.air_quality_index
                name: Air Quality
                icon: mdi:air-filter
                color: green
              - type: tile
                entity: sensor.allergy_index_today
                name: Allergy Index
                icon: mdi:flower-pollen
                color: amber
              - type: tile
                entity: sensor.asthma_index_today
                name: Asthma Index
                icon: mdi:lungs
                color: purple
              - type: tile
                entity: sensor.cold_flu_index_today
                name: Cold & Flu
                icon: mdi:virus
                color: red
            columns: 2
          - type: conditional
            conditions:
              - condition: numeric_state
                entity: sensor.nws_alerts_alerts
                above: 0
            card:
              type: vertical-stack
              cards:
                - type: heading
                  icon: mdi:alert-circle
                  heading: Weather Alerts
                  heading_style: title
                - type: markdown
                  content: >-
                    {{ state_attr('sensor.nws_alerts_alerts', 'alerts') |
                    map(attribute='title') | join('\n\n') if
                    state_attr('sensor.nws_alerts_alerts', 'alerts') else 'No
                    active alerts' }}
    column_span: 3
type: sections
max_columns: 3
path: home
icon: mdi:home-assistant
cards: []
dense_section_placement: false
theme: Rounded-Bubble

